description: 'Testing verbs for device: show summarize unique'
tests:
- command: device show --format=json
  data-directory: tests/data/basic_dual_bgp/parquet-out
  marks: device show
  output: '[{"namespace": "dual-bgp", "hostname": "edge01", "model": "vm", "version":
    "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive",
    "address": "192.168.121.210", "uptime": 154456, "timestamp": 1586403475456}, {"namespace":
    "dual-bgp", "hostname": "exit01", "model": "vm", "version": "3.7.12", "vendor":
    "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.242",
    "uptime": 148456, "timestamp": 1586403475456}, {"namespace": "dual-bgp", "hostname":
    "exit02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.116", "uptime": 147456, "timestamp":
    1586403475456}, {"namespace": "dual-bgp", "hostname": "internet", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.207", "uptime": 151456, "timestamp": 1586403475456},
    {"namespace": "dual-bgp", "hostname": "leaf01", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.130",
    "uptime": 147456, "timestamp": 1586403475456}, {"namespace": "dual-bgp", "hostname":
    "leaf02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.224", "uptime": 151456, "timestamp":
    1586403475456}, {"namespace": "dual-bgp", "hostname": "leaf03", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.175", "uptime": 146456, "timestamp": 1586403475456},
    {"namespace": "dual-bgp", "hostname": "leaf04", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.111",
    "uptime": 152456, "timestamp": 1586403475456}, {"namespace": "dual-bgp", "hostname":
    "server101", "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.100", "uptime": 367456, "timestamp":
    1586403475456}, {"namespace": "dual-bgp", "hostname": "server102", "model": "vm",
    "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.149", "uptime": 390456, "timestamp": 1586403475456},
    {"namespace": "dual-bgp", "hostname": "server103", "model": "vm", "version": "16.04.6
    LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address":
    "192.168.121.52", "uptime": 411456, "timestamp": 1586403475456}, {"namespace":
    "dual-bgp", "hostname": "server104", "model": "vm", "version": "16.04.6 LTS",
    "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address": "192.168.121.99",
    "uptime": 377456, "timestamp": 1586403475456}, {"namespace": "dual-bgp", "hostname":
    "spine01", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.13", "uptime": 148456, "timestamp":
    1586403475456}, {"namespace": "dual-bgp", "hostname": "spine02", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.66", "uptime": 147456, "timestamp": 1586403475456}]'
- command: device show --columns=hostname --format=json
  data-directory: tests/data/basic_dual_bgp/parquet-out
  marks: device show
  output: '[{"hostname": "edge01", "timestamp": 1586403475456, "namespace": "dual-bgp"},
    {"hostname": "exit01", "timestamp": 1586403475456, "namespace": "dual-bgp"}, {"hostname":
    "exit02", "timestamp": 1586403475456, "namespace": "dual-bgp"}, {"hostname": "internet",
    "timestamp": 1586403475456, "namespace": "dual-bgp"}, {"hostname": "leaf01", "timestamp":
    1586403475456, "namespace": "dual-bgp"}, {"hostname": "leaf02", "timestamp": 1586403475456,
    "namespace": "dual-bgp"}, {"hostname": "leaf03", "timestamp": 1586403475456, "namespace":
    "dual-bgp"}, {"hostname": "leaf04", "timestamp": 1586403475456, "namespace": "dual-bgp"},
    {"hostname": "server101", "timestamp": 1586403475456, "namespace": "dual-bgp"},
    {"hostname": "server102", "timestamp": 1586403475456, "namespace": "dual-bgp"},
    {"hostname": "server103", "timestamp": 1586403475456, "namespace": "dual-bgp"},
    {"hostname": "server104", "timestamp": 1586403475456, "namespace": "dual-bgp"},
    {"hostname": "spine01", "timestamp": 1586403475456, "namespace": "dual-bgp"},
    {"hostname": "spine02", "timestamp": 1586403475456, "namespace": "dual-bgp"}]'
- command: device summarize --format=json
  data-directory: tests/data/basic_dual_bgp/parquet-out
  marks: device summarize
  output: '[{"dual-bgp": 14}, {"dual-bgp": {"x86-64": 14}}, {"dual-bgp": 10}, {"dual-bgp":
    14}, {"dual-bgp": {"vm": 14}}, {"dual-bgp": 14}, {"dual-bgp": {"alive": 14}},
    {"dual-bgp": {"Cumulus": 9, "Ubuntu": 5}}, {"dual-bgp": {"3.7.12": 9, "16.04.6
    LTS": 5}}]'
- command: device summarize --namespace=dual-evpn --format=json
  data-directory: tests/data/basic_dual_bgp/parquet-out
  marks: device summarize
  output: '[]'
- command: device summarize --columns="namespace hostname" --format=json
  data-directory: tests/data/basic_dual_bgp/parquet-out
  error:
    error: '[{"error": "ERROR: You cannot specify columns with summarize"}]'
  marks: device summarize
- command: device unique --columns=hostname --format=json
  data-directory: tests/data/basic_dual_bgp/parquet-out
  marks: device unique
  output: '[{"hostname": "edge01", "count": 1}, {"hostname": "exit01", "count": 1},
    {"hostname": "exit02", "count": 1}, {"hostname": "internet", "count": 1}, {"hostname":
    "leaf01", "count": 1}, {"hostname": "leaf02", "count": 1}, {"hostname": "leaf03",
    "count": 1}, {"hostname": "leaf04", "count": 1}, {"hostname": "server101", "count":
    1}, {"hostname": "server102", "count": 1}, {"hostname": "server103", "count":
    1}, {"hostname": "server104", "count": 1}, {"hostname": "spine01", "count": 1},
    {"hostname": "spine02", "count": 1}]'
- command: device unique --columns="hostname namespace" --format=json
  data-directory: tests/data/basic_dual_bgp/parquet-out
  error:
    error: '[{"error": "ERROR: Specify a single column with unique"}]'
  marks: device unique
- command: device unique --columns=badcolumn --format=json
  data-directory: tests/data/basic_dual_bgp/parquet-out
  error:
    error: '[{"error": "ERROR: ''badcolumn''"}]'
  marks: device unique
