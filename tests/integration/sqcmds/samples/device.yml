description: 'Testing verbs for device: show summarize unique'
tests:
- command: device show --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device show
  output: '[{"namespace": "dual-evpn", "hostname": "edge01", "model": "vm", "version":
    "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive",
    "address": "192.168.121.161", "uptime": 75313, "timestamp": 1592018912313}, {"namespace":
    "dual-evpn", "hostname": "exit01", "model": "vm", "version": "3.7.12", "vendor":
    "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.135",
    "uptime": 71777, "timestamp": 1592018911777}, {"namespace": "dual-evpn", "hostname":
    "exit02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.90", "uptime": 72780, "timestamp":
    1592018911780}, {"namespace": "dual-evpn", "hostname": "internet", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.48", "uptime": 73780, "timestamp": 1592018911780},
    {"namespace": "dual-evpn", "hostname": "leaf01", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.194",
    "uptime": 74781, "timestamp": 1592018911781}, {"namespace": "dual-evpn", "hostname":
    "leaf02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.248", "uptime": 74780, "timestamp":
    1592018911780}, {"namespace": "dual-evpn", "hostname": "leaf03", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.107", "uptime": 73780, "timestamp": 1592018911780},
    {"namespace": "dual-evpn", "hostname": "leaf04", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.18",
    "uptime": 73780, "timestamp": 1592018911780}, {"namespace": "dual-evpn", "hostname":
    "server101", "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.191", "uptime": 245313, "timestamp":
    1592018912313}, {"namespace": "dual-evpn", "hostname": "server102", "model": "vm",
    "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.253", "uptime": 243313, "timestamp": 1592018912313},
    {"namespace": "dual-evpn", "hostname": "server103", "model": "vm", "version":
    "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive",
    "address": "192.168.121.128", "uptime": 239313, "timestamp": 1592018912313}, {"namespace":
    "dual-evpn", "hostname": "server104", "model": "vm", "version": "16.04.6 LTS",
    "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address": "192.168.121.247",
    "uptime": 266313, "timestamp": 1592018912313}, {"namespace": "dual-evpn", "hostname":
    "spine01", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.126", "uptime": 73780, "timestamp":
    1592018911780}, {"namespace": "dual-evpn", "hostname": "spine02", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.189", "uptime": 71780, "timestamp": 1592018911780},
    {"namespace": "ospf-ibgp", "hostname": "edge01", "model": "vm", "version": "16.04.6
    LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address":
    "192.168.121.10", "uptime": 76068, "timestamp": 1592018553068}, {"namespace":
    "ospf-ibgp", "hostname": "exit01", "model": "vm", "version": "3.7.12", "vendor":
    "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.112",
    "uptime": 73068, "timestamp": 1592018553068}, {"namespace": "ospf-ibgp", "hostname":
    "exit02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.97", "uptime": 71122, "timestamp":
    1592018553122}, {"namespace": "ospf-ibgp", "hostname": "internet", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.228", "uptime": 74122, "timestamp": 1592018553122},
    {"namespace": "ospf-ibgp", "hostname": "leaf01", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.57",
    "uptime": 72067, "timestamp": 1592018553067}, {"namespace": "ospf-ibgp", "hostname":
    "leaf02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.192", "uptime": 75068, "timestamp":
    1592018553068}, {"namespace": "ospf-ibgp", "hostname": "leaf03", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.136", "uptime": 74068, "timestamp": 1592018553068},
    {"namespace": "ospf-ibgp", "hostname": "leaf04", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.95",
    "uptime": 75068, "timestamp": 1592018553068}, {"namespace": "ospf-ibgp", "hostname":
    "server101", "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.100", "uptime": 247895, "timestamp":
    1592018553895}, {"namespace": "ospf-ibgp", "hostname": "server102", "model": "vm",
    "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.118", "uptime": 250123, "timestamp": 1592018553123},
    {"namespace": "ospf-ibgp", "hostname": "server103", "model": "vm", "version":
    "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive",
    "address": "192.168.121.254", "uptime": 274123, "timestamp": 1592018553123}, {"namespace":
    "ospf-ibgp", "hostname": "server104", "model": "vm", "version": "16.04.6 LTS",
    "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address": "192.168.121.168",
    "uptime": 253068, "timestamp": 1592018553068}, {"namespace": "ospf-ibgp", "hostname":
    "spine01", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.140", "uptime": 75068, "timestamp":
    1592018553068}, {"namespace": "ospf-ibgp", "hostname": "spine02", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.132", "uptime": 72122, "timestamp": 1592018553122},
    {"namespace": "ospf-single", "hostname": "edge01", "model": "vm", "version": "16.04.6
    LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address":
    "192.168.121.105", "uptime": 254852, "timestamp": 1592019256852}, {"namespace":
    "ospf-single", "hostname": "exit01", "model": "vm", "version": "3.7.12", "vendor":
    "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.99",
    "uptime": 60257, "timestamp": 1592019256257}, {"namespace": "ospf-single", "hostname":
    "exit02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.15", "uptime": 61446, "timestamp":
    1592019256446}, {"namespace": "ospf-single", "hostname": "internet", "model":
    "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.108", "uptime": 240257, "timestamp": 1592019256257},
    {"namespace": "ospf-single", "hostname": "leaf01", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.133",
    "uptime": 63257, "timestamp": 1592019256257}, {"namespace": "ospf-single", "hostname":
    "leaf02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.22", "uptime": 61257, "timestamp":
    1592019256257}, {"namespace": "ospf-single", "hostname": "leaf03", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.157", "uptime": 63257, "timestamp": 1592019256257},
    {"namespace": "ospf-single", "hostname": "leaf04", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.91",
    "uptime": 61257, "timestamp": 1592019256257}, {"namespace": "ospf-single", "hostname":
    "server101", "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.50", "uptime": 233446, "timestamp":
    1592019256446}, {"namespace": "ospf-single", "hostname": "server102", "model":
    "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.137", "uptime": 252446, "timestamp":
    1592019256446}, {"namespace": "ospf-single", "hostname": "server103", "model":
    "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.32", "uptime": 256446, "timestamp":
    1592019256446}, {"namespace": "ospf-single", "hostname": "server104", "model":
    "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.181", "uptime": 247446, "timestamp":
    1592019256446}, {"namespace": "ospf-single", "hostname": "spine01", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.55", "uptime": 61246, "timestamp": 1592019256246},
    {"namespace": "ospf-single", "hostname": "spine02", "model": "vm", "version":
    "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address":
    "192.168.121.154", "uptime": 60246, "timestamp": 1592019256246}]'
- command: device show --columns=hostname --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device show
  output: '[{"hostname": "edge01"}, {"hostname": "exit01"}, {"hostname": "exit02"},
    {"hostname": "internet"}, {"hostname": "leaf01"}, {"hostname": "leaf02"}, {"hostname":
    "leaf03"}, {"hostname": "leaf04"}, {"hostname": "server101"}, {"hostname": "server102"},
    {"hostname": "server103"}, {"hostname": "server104"}, {"hostname": "spine01"},
    {"hostname": "spine02"}, {"hostname": "edge01"}, {"hostname": "exit01"}, {"hostname":
    "exit02"}, {"hostname": "internet"}, {"hostname": "leaf01"}, {"hostname": "leaf02"},
    {"hostname": "leaf03"}, {"hostname": "leaf04"}, {"hostname": "server101"}, {"hostname":
    "server102"}, {"hostname": "server103"}, {"hostname": "server104"}, {"hostname":
    "spine01"}, {"hostname": "spine02"}, {"hostname": "edge01"}, {"hostname": "exit01"},
    {"hostname": "exit02"}, {"hostname": "internet"}, {"hostname": "leaf01"}, {"hostname":
    "leaf02"}, {"hostname": "leaf03"}, {"hostname": "leaf04"}, {"hostname": "server101"},
    {"hostname": "server102"}, {"hostname": "server103"}, {"hostname": "server104"},
    {"hostname": "spine01"}, {"hostname": "spine02"}]'
- command: device summarize --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device summarize
  output: '{"dual-evpn": {"deviceCnt": 14, "vendorCnt": {"Cumulus": 9, "Ubuntu": 5},
    "modelCnt": {"vm": 14}, "archCnt": {"x86-64": 14}, "versionCnt": {"3.7.12": 9,
    "16.04.6 LTS": 5}, "upTimeStat": [71, 266, 74]}, "ospf-ibgp": {"deviceCnt": 14,
    "vendorCnt": {"Cumulus": 9, "Ubuntu": 5}, "modelCnt": {"vm": 14}, "archCnt": {"x86-64":
    14}, "versionCnt": {"3.7.12": 9, "16.04.6 LTS": 5}, "upTimeStat": [71, 274, 75]},
    "ospf-single": {"deviceCnt": 14, "vendorCnt": {"Cumulus": 9, "Ubuntu": 5}, "modelCnt":
    {"vm": 14}, "archCnt": {"x86-64": 14}, "versionCnt": {"3.7.12": 9, "16.04.6 LTS":
    5}, "upTimeStat": [60, 256, 63]}}'
- command: device summarize --namespace=dual-evpn --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device summarize
  output: '{"dual-evpn": {"deviceCnt": 14, "vendorCnt": {"Cumulus": 9, "Ubuntu": 5},
    "modelCnt": {"vm": 14}, "archCnt": {"x86-64": 14}, "versionCnt": {"3.7.12": 9,
    "16.04.6 LTS": 5}, "upTimeStat": [71, 266, 74]}}'
- command: device summarize --columns="namespace hostname" --format=json
  data-directory: tests/data/multidc/parquet-out/
  error:
    error: '{"error": {"0": "ERROR: You cannot specify columns with summarize"}}'
  marks: device summarize
- command: device unique --columns=hostname --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device unique
  output: '[{"hostname": "spine02", "count": 3}, {"hostname": "spine01", "count":
    3}, {"hostname": "server104", "count": 3}, {"hostname": "server103", "count":
    3}, {"hostname": "server102", "count": 3}, {"hostname": "server101", "count":
    3}, {"hostname": "leaf04", "count": 3}, {"hostname": "leaf03", "count": 3}, {"hostname":
    "leaf02", "count": 3}, {"hostname": "leaf01", "count": 3}, {"hostname": "internet",
    "count": 3}, {"hostname": "exit02", "count": 3}, {"hostname": "exit01", "count":
    3}, {"hostname": "edge01", "count": 3}]'
- command: device unique --columns="hostname namespace" --format=json
  data-directory: tests/data/multidc/parquet-out/
  error:
    error: '[{"error": "ERROR: Specify a single column with unique"}]'
  marks: device unique
- command: device unique --columns=badcolumn --format=json
  data-directory: tests/data/multidc/parquet-out/
  error:
    error: '[{"error": "ERROR: ''badcolumn''"}]'
  marks: device unique
