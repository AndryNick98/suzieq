description: 'Testing verbs for device: show summarize unique'
tests:
- command: device show --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device show
  output: '[{"namespace": "dual-evpn", "hostname": "edge01", "model": "vm", "version":
    "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive",
    "address": "192.168.121.52", "uptime": 111541, "timestamp": 1587954040541}, {"namespace":
    "dual-evpn", "hostname": "exit01", "model": "vm", "version": "3.7.12", "vendor":
    "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.174",
    "uptime": 107032, "timestamp": 1587954041032}, {"namespace": "dual-evpn", "hostname":
    "exit02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.5", "uptime": 108282, "timestamp":
    1587954040282}, {"namespace": "dual-evpn", "hostname": "internet", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.48", "uptime": 109203, "timestamp": 1587954040203},
    {"namespace": "dual-evpn", "hostname": "leaf01", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.166",
    "uptime": 108203, "timestamp": 1587954040203}, {"namespace": "dual-evpn", "hostname":
    "leaf02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.23", "uptime": 108203, "timestamp":
    1587954040203}, {"namespace": "dual-evpn", "hostname": "leaf03", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.116", "uptime": 110282, "timestamp": 1587954040282},
    {"namespace": "dual-evpn", "hostname": "leaf04", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.131",
    "uptime": 107541, "timestamp": 1587954040541}, {"namespace": "dual-evpn", "hostname":
    "server101", "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.121", "uptime": 321541, "timestamp":
    1587954040541}, {"namespace": "dual-evpn", "hostname": "server102", "model": "vm",
    "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.57", "uptime": 327282, "timestamp": 1587954040282},
    {"namespace": "dual-evpn", "hostname": "server103", "model": "vm", "version":
    "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive",
    "address": "192.168.121.12", "uptime": 322618, "timestamp": 1587954039618}, {"namespace":
    "dual-evpn", "hostname": "server104", "model": "vm", "version": "16.04.6 LTS",
    "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address": "192.168.121.201",
    "uptime": 317282, "timestamp": 1587954040282}, {"namespace": "dual-evpn", "hostname":
    "spine01", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.54", "uptime": 110541, "timestamp":
    1587954040541}, {"namespace": "dual-evpn", "hostname": "spine02", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.205", "uptime": 105541, "timestamp": 1587954040541},
    {"namespace": "ospf-ibgp", "hostname": "edge01", "model": "vm", "version": "16.04.6
    LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address":
    "192.168.121.63", "uptime": 110828, "timestamp": 1587953484828}, {"namespace":
    "ospf-ibgp", "hostname": "exit01", "model": "vm", "version": "3.7.12", "vendor":
    "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.227",
    "uptime": 107791, "timestamp": 1587953484791}, {"namespace": "ospf-ibgp", "hostname":
    "exit02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.157", "uptime": 104828, "timestamp":
    1587953484828}, {"namespace": "ospf-ibgp", "hostname": "internet", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.21", "uptime": 108828, "timestamp": 1587953484828},
    {"namespace": "ospf-ibgp", "hostname": "leaf01", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.115",
    "uptime": 107413, "timestamp": 1587953485413}, {"namespace": "ospf-ibgp", "hostname":
    "leaf02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.202", "uptime": 108413, "timestamp":
    1587953485413}, {"namespace": "ospf-ibgp", "hostname": "leaf03", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.242", "uptime": 108791, "timestamp": 1587953484791},
    {"namespace": "ospf-ibgp", "hostname": "leaf04", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.160",
    "uptime": 105828, "timestamp": 1587953484828}, {"namespace": "ospf-ibgp", "hostname":
    "server101", "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.20", "uptime": 318828, "timestamp":
    1587953484828}, {"namespace": "ospf-ibgp", "hostname": "server102", "model": "vm",
    "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.167", "uptime": 299828, "timestamp": 1587953484828},
    {"namespace": "ospf-ibgp", "hostname": "server103", "model": "vm", "version":
    "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive",
    "address": "192.168.121.99", "uptime": 293333, "timestamp": 1587953484333}, {"namespace":
    "ospf-ibgp", "hostname": "server104", "model": "vm", "version": "16.04.6 LTS",
    "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address": "192.168.121.51",
    "uptime": 302617, "timestamp": 1587953484617}, {"namespace": "ospf-ibgp", "hostname":
    "spine01", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.231", "uptime": 106828, "timestamp":
    1587953484828}, {"namespace": "ospf-ibgp", "hostname": "spine02", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.9", "uptime": 108413, "timestamp": 1587953485413},
    {"namespace": "ospf-single", "hostname": "edge01", "model": "vm", "version": "16.04.6
    LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address":
    "192.168.121.74", "uptime": 274485, "timestamp": 1587955599485}, {"namespace":
    "ospf-single", "hostname": "exit01", "model": "vm", "version": "3.7.12", "vendor":
    "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.151",
    "uptime": 93485, "timestamp": 1587955599485}, {"namespace": "ospf-single", "hostname":
    "exit02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.179", "uptime": 94117, "timestamp":
    1587955600117}, {"namespace": "ospf-single", "hostname": "internet", "model":
    "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.228", "uptime": 294448, "timestamp": 1587955599448},
    {"namespace": "ospf-single", "hostname": "leaf01", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.108",
    "uptime": 98117, "timestamp": 1587955600117}, {"namespace": "ospf-single", "hostname":
    "leaf02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.53", "uptime": 94485, "timestamp":
    1587955599485}, {"namespace": "ospf-single", "hostname": "leaf03", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.36", "uptime": 92485, "timestamp": 1587955599485},
    {"namespace": "ospf-single", "hostname": "leaf04", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.246",
    "uptime": 93485, "timestamp": 1587955599485}, {"namespace": "ospf-single", "hostname":
    "server101", "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.80", "uptime": 298485, "timestamp":
    1587955599485}, {"namespace": "ospf-single", "hostname": "server102", "model":
    "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.184", "uptime": 293448, "timestamp":
    1587955599448}, {"namespace": "ospf-single", "hostname": "server103", "model":
    "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.236", "uptime": 283485, "timestamp":
    1587955599485}, {"namespace": "ospf-single", "hostname": "server104", "model":
    "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.72", "uptime": 273448, "timestamp":
    1587955599448}, {"namespace": "ospf-single", "hostname": "spine01", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.238", "uptime": 93117, "timestamp": 1587955600117},
    {"namespace": "ospf-single", "hostname": "spine02", "model": "vm", "version":
    "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address":
    "192.168.121.126", "uptime": 92448, "timestamp": 1587955599448}]'
- command: device show --columns=hostname --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device show
  output: '[{"hostname": "edge01"}, {"hostname": "exit01"}, {"hostname": "exit02"},
    {"hostname": "internet"}, {"hostname": "leaf01"}, {"hostname": "leaf02"}, {"hostname":
    "leaf03"}, {"hostname": "leaf04"}, {"hostname": "server101"}, {"hostname": "server102"},
    {"hostname": "server103"}, {"hostname": "server104"}, {"hostname": "spine01"},
    {"hostname": "spine02"}, {"hostname": "edge01"}, {"hostname": "exit01"}, {"hostname":
    "exit02"}, {"hostname": "internet"}, {"hostname": "leaf01"}, {"hostname": "leaf02"},
    {"hostname": "leaf03"}, {"hostname": "leaf04"}, {"hostname": "server101"}, {"hostname":
    "server102"}, {"hostname": "server103"}, {"hostname": "server104"}, {"hostname":
    "spine01"}, {"hostname": "spine02"}, {"hostname": "edge01"}, {"hostname": "exit01"},
    {"hostname": "exit02"}, {"hostname": "internet"}, {"hostname": "leaf01"}, {"hostname":
    "leaf02"}, {"hostname": "leaf03"}, {"hostname": "leaf04"}, {"hostname": "server101"},
    {"hostname": "server102"}, {"hostname": "server103"}, {"hostname": "server104"},
    {"hostname": "spine01"}, {"hostname": "spine02"}]'
- command: device summarize --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device summarize
  output: '{"dual-evpn": {"deviceCnt": 14, "vendorCnt": {"Cumulus": 9, "Ubuntu": 5},
    "modelCnt": {"vm": 14}, "archCnt": {"x86-64": 14}, "versionCnt": {"3.7.12": 9,
    "16.04.6 LTS": 5}, "upTimeStat": [105, 327, 109]}, "ospf-ibgp": {"deviceCnt":
    14, "vendorCnt": {"Cumulus": 9, "Ubuntu": 5}, "modelCnt": {"vm": 14}, "archCnt":
    {"x86-64": 14}, "versionCnt": {"3.7.12": 9, "16.04.6 LTS": 5}, "upTimeStat": [104,
    318, 108]}, "ospf-single": {"deviceCnt": 14, "vendorCnt": {"Cumulus": 9, "Ubuntu":
    5}, "modelCnt": {"vm": 14}, "archCnt": {"x86-64": 14}, "versionCnt": {"3.7.12":
    9, "16.04.6 LTS": 5}, "upTimeStat": [92, 298, 96]}}'
- command: device summarize --namespace=dual-evpn --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device summarize
  output: '{"dual-evpn": {"deviceCnt": 14, "vendorCnt": {"Cumulus": 9, "Ubuntu": 5},
    "modelCnt": {"vm": 14}, "archCnt": {"x86-64": 14}, "versionCnt": {"3.7.12": 9,
    "16.04.6 LTS": 5}, "upTimeStat": [105, 327, 109]}}'
- command: device summarize --columns="namespace hostname" --format=json
  data-directory: tests/data/multidc/parquet-out/
  error:
    error: '{"error": {"0": "ERROR: You cannot specify columns with summarize"}}'
  marks: device summarize
- command: device unique --columns=hostname --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device unique
  output: '[{"hostname": "spine02", "count": 3}, {"hostname": "spine01", "count":
    3}, {"hostname": "server104", "count": 3}, {"hostname": "server103", "count":
    3}, {"hostname": "server102", "count": 3}, {"hostname": "server101", "count":
    3}, {"hostname": "leaf04", "count": 3}, {"hostname": "leaf03", "count": 3}, {"hostname":
    "leaf02", "count": 3}, {"hostname": "leaf01", "count": 3}, {"hostname": "internet",
    "count": 3}, {"hostname": "exit02", "count": 3}, {"hostname": "exit01", "count":
    3}, {"hostname": "edge01", "count": 3}]'
- command: device unique --columns="hostname namespace" --format=json
  data-directory: tests/data/multidc/parquet-out/
  error:
    error: '[{"error": "ERROR: Specify a single column with unique"}]'
  marks: device unique
- command: device unique --columns=badcolumn --format=json
  data-directory: tests/data/multidc/parquet-out/
  error:
    error: '[{"error": "ERROR: ''badcolumn''"}]'
  marks: device unique
