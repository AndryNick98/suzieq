description: 'Testing verbs for device: show summarize unique'
tests:
- command: device show --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device show
  output: '[{"namespace": "dual-evpn", "hostname": "edge01", "model": "vm", "version":
    "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive",
    "address": "192.168.121.23", "uptime": 59240, "timestamp": 1586665226240}, {"namespace":
    "dual-evpn", "hostname": "exit01", "model": "vm", "version": "3.7.12", "vendor":
    "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.113",
    "uptime": 52240, "timestamp": 1586665226240}, {"namespace": "dual-evpn", "hostname":
    "exit02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.167", "uptime": 52240, "timestamp":
    1586665226240}, {"namespace": "dual-evpn", "hostname": "internet", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.233", "uptime": 54240, "timestamp": 1586665226240},
    {"namespace": "dual-evpn", "hostname": "leaf01", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.142",
    "uptime": 52240, "timestamp": 1586665226240}, {"namespace": "dual-evpn", "hostname":
    "leaf02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.87", "uptime": 53240, "timestamp":
    1586665226240}, {"namespace": "dual-evpn", "hostname": "leaf03", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.112", "uptime": 52240, "timestamp": 1586665226240},
    {"namespace": "dual-evpn", "hostname": "leaf04", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.149",
    "uptime": 53240, "timestamp": 1586665226240}, {"namespace": "dual-evpn", "hostname":
    "server101", "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.160", "uptime": 297240, "timestamp":
    1586665226240}, {"namespace": "dual-evpn", "hostname": "server102", "model": "vm",
    "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.31", "uptime": 275240, "timestamp": 1586665226240},
    {"namespace": "dual-evpn", "hostname": "server103", "model": "vm", "version":
    "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive",
    "address": "192.168.121.215", "uptime": 285240, "timestamp": 1586665226240}, {"namespace":
    "dual-evpn", "hostname": "server104", "model": "vm", "version": "16.04.6 LTS",
    "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address": "192.168.121.52",
    "uptime": 295240, "timestamp": 1586665226240}, {"namespace": "dual-evpn", "hostname":
    "spine01", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.165", "uptime": 53240, "timestamp":
    1586665226240}, {"namespace": "dual-evpn", "hostname": "spine02", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.190", "uptime": 52240, "timestamp": 1586665226240},
    {"namespace": "ospf-ibgp", "hostname": "edge01", "model": "vm", "version": "16.04.6
    LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address":
    "192.168.121.7", "uptime": 52952, "timestamp": 1586664701952}, {"namespace": "ospf-ibgp",
    "hostname": "exit01", "model": "vm", "version": "3.7.12", "vendor": "Cumulus",
    "architecture": "x86-64", "status": "alive", "address": "192.168.121.152", "uptime":
    49952, "timestamp": 1586664701952}, {"namespace": "ospf-ibgp", "hostname": "exit02",
    "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.183", "uptime": 49952, "timestamp":
    1586664701952}, {"namespace": "ospf-ibgp", "hostname": "internet", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.135", "uptime": 51952, "timestamp": 1586664701952},
    {"namespace": "ospf-ibgp", "hostname": "leaf01", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.199",
    "uptime": 50952, "timestamp": 1586664701952}, {"namespace": "ospf-ibgp", "hostname":
    "leaf02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.232", "uptime": 50952, "timestamp":
    1586664701952}, {"namespace": "ospf-ibgp", "hostname": "leaf03", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.71", "uptime": 48952, "timestamp": 1586664701952},
    {"namespace": "ospf-ibgp", "hostname": "leaf04", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.78",
    "uptime": 50952, "timestamp": 1586664701952}, {"namespace": "ospf-ibgp", "hostname":
    "server101", "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.231", "uptime": 249952, "timestamp":
    1586664701952}, {"namespace": "ospf-ibgp", "hostname": "server102", "model": "vm",
    "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.168", "uptime": 222952, "timestamp": 1586664701952},
    {"namespace": "ospf-ibgp", "hostname": "server103", "model": "vm", "version":
    "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive",
    "address": "192.168.121.148", "uptime": 232952, "timestamp": 1586664701952}, {"namespace":
    "ospf-ibgp", "hostname": "server104", "model": "vm", "version": "16.04.6 LTS",
    "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address": "192.168.121.17",
    "uptime": 281952, "timestamp": 1586664701952}, {"namespace": "ospf-ibgp", "hostname":
    "spine01", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.229", "uptime": 49952, "timestamp":
    1586664701952}, {"namespace": "ospf-ibgp", "hostname": "spine02", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.72", "uptime": 48952, "timestamp": 1586664701952},
    {"namespace": "ospf-single", "hostname": "edge01", "model": "vm", "version": "16.04.6
    LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address":
    "192.168.121.39", "uptime": 290528, "timestamp": 1586665750528}, {"namespace":
    "ospf-single", "hostname": "exit01", "model": "vm", "version": "3.7.12", "vendor":
    "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.18",
    "uptime": 95528, "timestamp": 1586665750528}, {"namespace": "ospf-single", "hostname":
    "exit02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.164", "uptime": 94528, "timestamp":
    1586665750528}, {"namespace": "ospf-single", "hostname": "internet", "model":
    "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.114", "uptime": 274528, "timestamp": 1586665750528},
    {"namespace": "ospf-single", "hostname": "leaf01", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.97",
    "uptime": 95528, "timestamp": 1586665750528}, {"namespace": "ospf-single", "hostname":
    "leaf02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.46", "uptime": 96528, "timestamp":
    1586665750528}, {"namespace": "ospf-single", "hostname": "leaf03", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.90", "uptime": 95528, "timestamp": 1586665750528},
    {"namespace": "ospf-single", "hostname": "leaf04", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.198",
    "uptime": 95528, "timestamp": 1586665750528}, {"namespace": "ospf-single", "hostname":
    "server101", "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.24", "uptime": 265528, "timestamp":
    1586665750528}, {"namespace": "ospf-single", "hostname": "server102", "model":
    "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.213", "uptime": 254528, "timestamp":
    1586665750528}, {"namespace": "ospf-single", "hostname": "server103", "model":
    "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.40", "uptime": 259528, "timestamp":
    1586665750528}, {"namespace": "ospf-single", "hostname": "server104", "model":
    "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64",
    "status": "alive", "address": "192.168.121.204", "uptime": 256528, "timestamp":
    1586665750528}, {"namespace": "ospf-single", "hostname": "spine01", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.181", "uptime": 101528, "timestamp": 1586665750528},
    {"namespace": "ospf-single", "hostname": "spine02", "model": "vm", "version":
    "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address":
    "192.168.121.128", "uptime": 94528, "timestamp": 1586665750528}]'
- command: device show --columns=hostname --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device show
  output: '[{"hostname": "edge01"}, {"hostname": "exit01"}, {"hostname": "exit02"},
    {"hostname": "internet"}, {"hostname": "leaf01"}, {"hostname": "leaf02"}, {"hostname":
    "leaf03"}, {"hostname": "leaf04"}, {"hostname": "server101"}, {"hostname": "server102"},
    {"hostname": "server103"}, {"hostname": "server104"}, {"hostname": "spine01"},
    {"hostname": "spine02"}, {"hostname": "edge01"}, {"hostname": "exit01"}, {"hostname":
    "exit02"}, {"hostname": "internet"}, {"hostname": "leaf01"}, {"hostname": "leaf02"},
    {"hostname": "leaf03"}, {"hostname": "leaf04"}, {"hostname": "server101"}, {"hostname":
    "server102"}, {"hostname": "server103"}, {"hostname": "server104"}, {"hostname":
    "spine01"}, {"hostname": "spine02"}, {"hostname": "edge01"}, {"hostname": "exit01"},
    {"hostname": "exit02"}, {"hostname": "internet"}, {"hostname": "leaf01"}, {"hostname":
    "leaf02"}, {"hostname": "leaf03"}, {"hostname": "leaf04"}, {"hostname": "server101"},
    {"hostname": "server102"}, {"hostname": "server103"}, {"hostname": "server104"},
    {"hostname": "spine01"}, {"hostname": "spine02"}]'
- command: device summarize --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device summarize
  output: '[{"dual-evpn": {"x86-64": 14}, "ospf-ibgp": {"x86-64": 14}, "ospf-single":
    {"x86-64": 14}}, {"dual-evpn": {"alive": 14}, "ospf-ibgp": {"alive": 14}, "ospf-single":
    {"alive": 14}}, {"dual-evpn": 14, "ospf-ibgp": 14, "ospf-single": 14}, {"dual-evpn":
    {"vm": 14}, "ospf-ibgp": {"vm": 14}, "ospf-single": {"vm": 14}}, {"dual-evpn":
    {"Cumulus": 9, "Ubuntu": 5}, "ospf-ibgp": {"Cumulus": 9, "Ubuntu": 5}, "ospf-single":
    {"Cumulus": 9, "Ubuntu": 5}}, {"dual-evpn": {"3.7.12": 9, "16.04.6 LTS": 5}, "ospf-ibgp":
    {"3.7.12": 9, "16.04.6 LTS": 5}, "ospf-single": {"3.7.12": 9, "16.04.6 LTS": 5}},
    {"dual-evpn": 8, "ospf-ibgp": 9, "ospf-single": 10}, {"dual-evpn": 14, "ospf-ibgp":
    14, "ospf-single": 14}, {"dual-evpn": 14, "ospf-ibgp": 14, "ospf-single": 14}]'
- command: device summarize --namespace=dual-evpn --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device summarize
  output: '[{"dual-evpn": 14}, {"dual-evpn": {"x86-64": 14}}, {"dual-evpn": 8}, {"dual-evpn":
    14}, {"dual-evpn": {"vm": 14}}, {"dual-evpn": 14}, {"dual-evpn": {"alive": 14}},
    {"dual-evpn": {"Cumulus": 9, "Ubuntu": 5}}, {"dual-evpn": {"3.7.12": 9, "16.04.6
    LTS": 5}}]'
- command: device summarize --columns="namespace hostname" --format=json
  data-directory: tests/data/multidc/parquet-out/
  error:
    error: '[{"error": "ERROR: You cannot specify columns with summarize"}]'
  marks: device summarize
- command: device unique --columns=hostname --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device unique
  output: '[{"hostname": "spine02", "count": 3}, {"hostname": "spine01", "count":
    3}, {"hostname": "server104", "count": 3}, {"hostname": "server103", "count":
    3}, {"hostname": "server102", "count": 3}, {"hostname": "server101", "count":
    3}, {"hostname": "leaf04", "count": 3}, {"hostname": "leaf03", "count": 3}, {"hostname":
    "leaf02", "count": 3}, {"hostname": "leaf01", "count": 3}, {"hostname": "internet",
    "count": 3}, {"hostname": "exit02", "count": 3}, {"hostname": "exit01", "count":
    3}, {"hostname": "edge01", "count": 3}]'
- command: device unique --columns="hostname namespace" --format=json
  data-directory: tests/data/multidc/parquet-out/
  error:
    error: '[{"error": "ERROR: Specify a single column with unique"}]'
  marks: device unique
- command: device unique --columns=badcolumn --format=json
  data-directory: tests/data/multidc/parquet-out/
  error:
    error: '[{"error": "ERROR: ''badcolumn''"}]'
  marks: device unique
