description: Testing top verb for bgp, interface and device
tests:
- command: interface top --what="flaps" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface top flaps
  output: '[{"namespace": "dual-evpn", "hostname": "edge01", "ifname": "eth0", "state":
    "up", "type": "ether", "mtu": 1500, "vlan": 0, "master": "", "ipAddressList":
    ["192.168.121.35/24"], "ip6AddressList": [], "numChanges": 0, "timestamp": 1592189088150},
    {"namespace": "dual-evpn", "hostname": "edge01", "ifname": "eth1", "state": "up",
    "type": "ether", "mtu": 1500, "vlan": 0, "master": "", "ipAddressList": [], "ip6AddressList":
    [], "numChanges": 0, "timestamp": 1592189088150}, {"namespace": "dual-evpn", "hostname":
    "edge01", "ifname": "eth2", "state": "up", "type": "ether", "mtu": 1500, "vlan":
    0, "master": "", "ipAddressList": [], "ip6AddressList": [], "numChanges": 0, "timestamp":
    1592189088150}, {"namespace": "dual-evpn", "hostname": "exit01", "ifname": "eth0",
    "state": "up", "type": "ether", "mtu": 1500, "vlan": 0, "master": "mgmt", "ipAddressList":
    ["192.168.121.81/24"], "ip6AddressList": ["fe80::5054:ff:fec2:6e83/64"], "numChanges":
    0, "timestamp": 1592189088150}, {"namespace": "dual-evpn", "hostname": "exit01",
    "ifname": "swp1", "state": "up", "type": "ether", "mtu": 9216, "vlan": 0, "master":
    "", "ipAddressList": [], "ip6AddressList": ["fe80::5054:ff:fead:c18f/64"], "numChanges":
    0, "timestamp": 1592189088150}]'
- command: interface top --what="flaps" --namespace=ospf-ibgp --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface top flaps
  output: '[{"namespace": "ospf-ibgp", "hostname": "edge01", "ifname": "eth0", "state":
    "up", "type": "ether", "mtu": 1500, "vlan": 0, "master": "", "ipAddressList":
    ["192.168.121.158/24"], "ip6AddressList": [], "numChanges": 0, "timestamp": 1592188696583},
    {"namespace": "ospf-ibgp", "hostname": "edge01", "ifname": "eth1", "state": "up",
    "type": "ether", "mtu": 1500, "vlan": 0, "master": "", "ipAddressList": [], "ip6AddressList":
    [], "numChanges": 0, "timestamp": 1592188696583}, {"namespace": "ospf-ibgp", "hostname":
    "edge01", "ifname": "eth2", "state": "up", "type": "ether", "mtu": 1500, "vlan":
    0, "master": "", "ipAddressList": [], "ip6AddressList": [], "numChanges": 0, "timestamp":
    1592188696583}, {"namespace": "ospf-ibgp", "hostname": "exit01", "ifname": "eth0",
    "state": "up", "type": "ether", "mtu": 1500, "vlan": 0, "master": "mgmt", "ipAddressList":
    ["192.168.121.241/24"], "ip6AddressList": ["fe80::5054:ff:fe74:9240/64"], "numChanges":
    0, "timestamp": 1592188696949}, {"namespace": "ospf-ibgp", "hostname": "exit01",
    "ifname": "swp1", "state": "up", "type": "ether", "mtu": 9216, "vlan": 0, "master":
    "", "ipAddressList": ["10.0.0.101/32"], "ip6AddressList": ["fe80::5054:ff:fefd:5e75/64"],
    "numChanges": 0, "timestamp": 1592188696949}]'
- command: interface top --what="flaps" --namespace=ospf-ibgp --columns="hostname
    ifname state mtu" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: interface top flaps
  output: '[{"hostname": "edge01", "ifname": "eth0", "state": "up", "mtu": 1500},
    {"hostname": "edge01", "ifname": "eth1", "state": "up", "mtu": 1500}, {"hostname":
    "edge01", "ifname": "eth2", "state": "up", "mtu": 1500}, {"hostname": "exit01",
    "ifname": "eth0", "state": "up", "mtu": 1500}, {"hostname": "exit01", "ifname":
    "swp1", "state": "up", "mtu": 9216}]'
- command: bgp top --what="flaps" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: bgp top flaps
  output: '[{"namespace": "ospf-ibgp", "hostname": "exit01", "vrf": "internet-vrf",
    "peer": "swp6", "peerHostname": "internet", "state": "Established", "asn": 65001,
    "peerAsn": 25253, "v4PfxRx": 3, "estdTime": "18428 days, 2:37:16", "numChanges":
    3, "timestamp": 1592188700908}, {"namespace": "ospf-ibgp", "hostname": "internet",
    "vrf": "default", "peer": "swp1", "peerHostname": "exit01", "state": "Established",
    "asn": 25253, "peerAsn": 65001, "v4PfxRx": 13, "estdTime": "18428 days, 2:37:16",
    "numChanges": 3, "timestamp": 1592188700970}, {"namespace": "dual-evpn", "hostname":
    "edge01", "vrf": "default", "peer": "eth1.2", "peerHostname": "exit01", "state":
    "Established", "asn": 65530, "peerAsn": 65201, "v4PfxRx": 10, "estdTime": "18428
    days, 2:43:49", "numChanges": 1, "timestamp": 1592189091420}, {"namespace": "dual-evpn",
    "hostname": "edge01", "vrf": "default", "peer": "eth1.3", "peerHostname": "exit01",
    "state": "Established", "asn": 65530, "peerAsn": 65201, "v4PfxRx": 3, "estdTime":
    "18428 days, 2:43:48", "numChanges": 1, "timestamp": 1592189091420}, {"namespace":
    "dual-evpn", "hostname": "edge01", "vrf": "default", "peer": "eth1.4", "peerHostname":
    "exit01", "state": "Established", "asn": 65530, "peerAsn": 65201, "v4PfxRx": 4,
    "estdTime": "18428 days, 2:43:48", "numChanges": 1, "timestamp": 1592189091420}]'
- command: bgp top --what="flaps" --namespace="dual-evpn" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: bgp top flaps
  output: '[{"namespace": "dual-evpn", "hostname": "edge01", "vrf": "default", "peer":
    "eth1.2", "peerHostname": "exit01", "state": "Established", "asn": 65530, "peerAsn":
    65201, "v4PfxRx": 10, "estdTime": "18428 days, 2:43:49", "numChanges": 1, "timestamp":
    1592189091420}, {"namespace": "dual-evpn", "hostname": "edge01", "vrf": "default",
    "peer": "eth1.3", "peerHostname": "exit01", "state": "Established", "asn": 65530,
    "peerAsn": 65201, "v4PfxRx": 3, "estdTime": "18428 days, 2:43:48", "numChanges":
    1, "timestamp": 1592189091420}, {"namespace": "dual-evpn", "hostname": "edge01",
    "vrf": "default", "peer": "eth1.4", "peerHostname": "exit01", "state": "Established",
    "asn": 65530, "peerAsn": 65201, "v4PfxRx": 4, "estdTime": "18428 days, 2:43:48",
    "numChanges": 1, "timestamp": 1592189091420}, {"namespace": "dual-evpn", "hostname":
    "edge01", "vrf": "default", "peer": "eth2.2", "peerHostname": "exit02", "state":
    "Established", "asn": 65530, "peerAsn": 65202, "v4PfxRx": 9, "estdTime": "18428
    days, 2:43:48", "numChanges": 1, "timestamp": 1592189091420}, {"namespace": "dual-evpn",
    "hostname": "edge01", "vrf": "default", "peer": "eth2.3", "peerHostname": "exit02",
    "state": "Established", "asn": 65530, "peerAsn": 65202, "v4PfxRx": 2, "estdTime":
    "18428 days, 2:43:48", "numChanges": 1, "timestamp": 1592189091420}]'
- command: bgp top --what="flaps" --namespace="dual-evpn" --columns="hostname peer"
    --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: bgp top flaps
  output: '[{"hostname": "edge01", "peer": "eth1.2"}, {"hostname": "edge01", "peer":
    "eth1.3"}, {"hostname": "edge01", "peer": "eth1.4"}, {"hostname": "edge01", "peer":
    "eth2.2"}, {"hostname": "edge01", "peer": "eth2.3"}]'
- command: bgp top --what="v4PrefixRx" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: bgp top
  output: '[{"namespace": "dual-evpn", "hostname": "exit01", "vrf": "internet-vrf",
    "peer": "swp5.4", "peerHostname": "edge01", "state": "Established", "asn": 65201,
    "peerAsn": 65530, "v4PfxRx": 16, "estdTime": "18428 days, 2:43:50", "numChanges":
    1, "timestamp": 1592189091826}, {"namespace": "dual-evpn", "hostname": "exit01",
    "vrf": "evpn-vrf", "peer": "swp5.3", "peerHostname": "edge01", "state": "Established",
    "asn": 65201, "peerAsn": 65530, "v4PfxRx": 15, "estdTime": "18428 days, 2:43:50",
    "numChanges": 1, "timestamp": 1592189091826}, {"namespace": "dual-evpn", "hostname":
    "exit02", "vrf": "evpn-vrf", "peer": "swp5.3", "peerHostname": "edge01", "state":
    "Established", "asn": 65202, "peerAsn": 65530, "v4PfxRx": 14, "estdTime": "18428
    days, 2:43:48", "numChanges": 1, "timestamp": 1592189091826}, {"namespace": "dual-evpn",
    "hostname": "leaf01", "vrf": "default", "peer": "swp1", "peerHostname": "spine01",
    "state": "Established", "asn": 65101, "peerAsn": 65000, "v4PfxRx": 14, "estdTime":
    "18428 days, 2:43:47", "numChanges": 1, "timestamp": 1592189092031}, {"namespace":
    "dual-evpn", "hostname": "leaf01", "vrf": "default", "peer": "swp2", "peerHostname":
    "spine02", "state": "Established", "asn": 65101, "peerAsn": 65000, "v4PfxRx":
    14, "estdTime": "18428 days, 2:43:46", "numChanges": 1, "timestamp": 1592189092031}]'
- command: bgp top --what="v4PrefixRx" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: bgp top
  output: '[{"namespace": "dual-evpn", "hostname": "exit01", "vrf": "internet-vrf",
    "peer": "swp5.4", "peerHostname": "edge01", "state": "Established", "asn": 65201,
    "peerAsn": 65530, "v4PfxRx": 16, "estdTime": "18428 days, 2:43:50", "numChanges":
    1, "timestamp": 1592189091826}, {"namespace": "dual-evpn", "hostname": "exit01",
    "vrf": "evpn-vrf", "peer": "swp5.3", "peerHostname": "edge01", "state": "Established",
    "asn": 65201, "peerAsn": 65530, "v4PfxRx": 15, "estdTime": "18428 days, 2:43:50",
    "numChanges": 1, "timestamp": 1592189091826}, {"namespace": "dual-evpn", "hostname":
    "exit02", "vrf": "evpn-vrf", "peer": "swp5.3", "peerHostname": "edge01", "state":
    "Established", "asn": 65202, "peerAsn": 65530, "v4PfxRx": 14, "estdTime": "18428
    days, 2:43:48", "numChanges": 1, "timestamp": 1592189091826}, {"namespace": "dual-evpn",
    "hostname": "leaf01", "vrf": "default", "peer": "swp1", "peerHostname": "spine01",
    "state": "Established", "asn": 65101, "peerAsn": 65000, "v4PfxRx": 14, "estdTime":
    "18428 days, 2:43:47", "numChanges": 1, "timestamp": 1592189092031}, {"namespace":
    "dual-evpn", "hostname": "leaf01", "vrf": "default", "peer": "swp2", "peerHostname":
    "spine02", "state": "Established", "asn": 65101, "peerAsn": 65000, "v4PfxRx":
    14, "estdTime": "18428 days, 2:43:46", "numChanges": 1, "timestamp": 1592189092031}]'
- command: bgp top --what="v6PrefixRx" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: bgp top
  output: '[{"namespace": "dual-evpn", "hostname": "edge01", "vrf": "default", "peer":
    "eth1.2", "peerHostname": "exit01", "state": "Established", "asn": 65530, "peerAsn":
    65201, "v4PfxRx": 10, "estdTime": "18428 days, 2:43:49", "numChanges": 1, "v6PfxRx":
    0, "timestamp": 1592189091420}, {"namespace": "dual-evpn", "hostname": "edge01",
    "vrf": "default", "peer": "eth1.3", "peerHostname": "exit01", "state": "Established",
    "asn": 65530, "peerAsn": 65201, "v4PfxRx": 3, "estdTime": "18428 days, 2:43:48",
    "numChanges": 1, "v6PfxRx": 0, "timestamp": 1592189091420}, {"namespace": "dual-evpn",
    "hostname": "edge01", "vrf": "default", "peer": "eth1.4", "peerHostname": "exit01",
    "state": "Established", "asn": 65530, "peerAsn": 65201, "v4PfxRx": 4, "estdTime":
    "18428 days, 2:43:48", "numChanges": 1, "v6PfxRx": 0, "timestamp": 1592189091420},
    {"namespace": "dual-evpn", "hostname": "edge01", "vrf": "default", "peer": "eth2.2",
    "peerHostname": "exit02", "state": "Established", "asn": 65530, "peerAsn": 65202,
    "v4PfxRx": 9, "estdTime": "18428 days, 2:43:48", "numChanges": 1, "v6PfxRx": 0,
    "timestamp": 1592189091420}, {"namespace": "dual-evpn", "hostname": "edge01",
    "vrf": "default", "peer": "eth2.3", "peerHostname": "exit02", "state": "Established",
    "asn": 65530, "peerAsn": 65202, "v4PfxRx": 2, "estdTime": "18428 days, 2:43:48",
    "numChanges": 1, "v6PfxRx": 0, "timestamp": 1592189091420}]'
- command: bgp top --what="evpnPrefixRx" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: bgp top
  output: '[{"namespace": "dual-evpn", "hostname": "exit01", "vrf": "default", "peer":
    "swp1", "peerHostname": "spine01", "state": "Established", "asn": 65201, "peerAsn":
    65000, "v4PfxRx": 8, "estdTime": "18428 days, 2:43:48", "numChanges": 1, "evpnPfxRx":
    38, "timestamp": 1592189091826}, {"namespace": "dual-evpn", "hostname": "exit01",
    "vrf": "default", "peer": "swp2", "peerHostname": "spine02", "state": "Established",
    "asn": 65201, "peerAsn": 65000, "v4PfxRx": 8, "estdTime": "18428 days, 2:43:48",
    "numChanges": 1, "evpnPfxRx": 38, "timestamp": 1592189091826}, {"namespace": "dual-evpn",
    "hostname": "exit02", "vrf": "default", "peer": "swp1", "peerHostname": "spine01",
    "state": "Established", "asn": 65202, "peerAsn": 65000, "v4PfxRx": 9, "estdTime":
    "18428 days, 2:43:47", "numChanges": 1, "evpnPfxRx": 38, "timestamp": 1592189091826},
    {"namespace": "dual-evpn", "hostname": "exit02", "vrf": "default", "peer": "swp2",
    "peerHostname": "spine02", "state": "Established", "asn": 65202, "peerAsn": 65000,
    "v4PfxRx": 9, "estdTime": "18428 days, 2:43:47", "numChanges": 1, "evpnPfxRx":
    38, "timestamp": 1592189091826}, {"namespace": "ospf-ibgp", "hostname": "exit01",
    "vrf": "default", "peer": "swp1", "peerHostname": "spine01", "state": "Established",
    "asn": 65000, "peerAsn": 65000, "v4PfxRx": 1, "estdTime": "18428 days, 2:37:16",
    "numChanges": 1, "evpnPfxRx": 38, "timestamp": 1592188700908}]'
- command: bgp top --what="updatesRx" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: bgp top
  output: '[{"namespace": "dual-evpn", "hostname": "exit01", "vrf": "default", "peer":
    "swp1", "peerHostname": "spine01", "state": "Established", "asn": 65201, "peerAsn":
    65000, "v4PfxRx": 8, "estdTime": "18428 days, 2:43:48", "numChanges": 1, "updatesRx":
    54, "timestamp": 1592189091826}, {"namespace": "dual-evpn", "hostname": "exit01",
    "vrf": "default", "peer": "swp2", "peerHostname": "spine02", "state": "Established",
    "asn": 65201, "peerAsn": 65000, "v4PfxRx": 8, "estdTime": "18428 days, 2:43:48",
    "numChanges": 1, "updatesRx": 54, "timestamp": 1592189091826}, {"namespace": "dual-evpn",
    "hostname": "exit02", "vrf": "default", "peer": "swp1", "peerHostname": "spine01",
    "state": "Established", "asn": 65202, "peerAsn": 65000, "v4PfxRx": 9, "estdTime":
    "18428 days, 2:43:47", "numChanges": 1, "updatesRx": 54, "timestamp": 1592189091826},
    {"namespace": "dual-evpn", "hostname": "exit02", "vrf": "default", "peer": "swp2",
    "peerHostname": "spine02", "state": "Established", "asn": 65202, "peerAsn": 65000,
    "v4PfxRx": 9, "estdTime": "18428 days, 2:43:47", "numChanges": 1, "updatesRx":
    54, "timestamp": 1592189091826}, {"namespace": "dual-evpn", "hostname": "leaf01",
    "vrf": "default", "peer": "swp1", "peerHostname": "spine01", "state": "Established",
    "asn": 65101, "peerAsn": 65000, "v4PfxRx": 14, "estdTime": "18428 days, 2:43:47",
    "numChanges": 1, "updatesRx": 54, "timestamp": 1592189092031}]'
- command: bgp top --what="updatesTx" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: bgp top
  output: '[{"namespace": "dual-evpn", "hostname": "spine01", "vrf": "default", "peer":
    "swp1", "peerHostname": "leaf01", "state": "Established", "asn": 65000, "peerAsn":
    65101, "v4PfxRx": 2, "estdTime": "18428 days, 2:43:48", "numChanges": 1, "updatesTx":
    54, "timestamp": 1592189091826}, {"namespace": "dual-evpn", "hostname": "spine01",
    "vrf": "default", "peer": "swp2", "peerHostname": "leaf02", "state": "Established",
    "asn": 65000, "peerAsn": 65102, "v4PfxRx": 2, "estdTime": "18428 days, 2:43:46",
    "numChanges": 1, "updatesTx": 54, "timestamp": 1592189091826}, {"namespace": "dual-evpn",
    "hostname": "spine01", "vrf": "default", "peer": "swp3", "peerHostname": "leaf03",
    "state": "Established", "asn": 65000, "peerAsn": 65103, "v4PfxRx": 2, "estdTime":
    "18428 days, 2:43:49", "numChanges": 1, "updatesTx": 54, "timestamp": 1592189091826},
    {"namespace": "dual-evpn", "hostname": "spine01", "vrf": "default", "peer": "swp4",
    "peerHostname": "leaf04", "state": "Established", "asn": 65000, "peerAsn": 65104,
    "v4PfxRx": 2, "estdTime": "18428 days, 2:43:46", "numChanges": 1, "updatesTx":
    54, "timestamp": 1592189091826}, {"namespace": "dual-evpn", "hostname": "spine01",
    "vrf": "default", "peer": "swp5", "peerHostname": "exit02", "state": "Established",
    "asn": 65000, "peerAsn": 65202, "v4PfxRx": 8, "estdTime": "18428 days, 2:43:48",
    "numChanges": 1, "updatesTx": 54, "timestamp": 1592189091826}]'
- command: bgp top --what="v4PrefixRx" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: bgp top
  output: '[{"namespace": "dual-evpn", "hostname": "exit01", "vrf": "internet-vrf",
    "peer": "swp5.4", "peerHostname": "edge01", "state": "Established", "asn": 65201,
    "peerAsn": 65530, "v4PfxRx": 16, "estdTime": "18428 days, 2:43:50", "numChanges":
    1, "timestamp": 1592189091826}, {"namespace": "dual-evpn", "hostname": "exit01",
    "vrf": "evpn-vrf", "peer": "swp5.3", "peerHostname": "edge01", "state": "Established",
    "asn": 65201, "peerAsn": 65530, "v4PfxRx": 15, "estdTime": "18428 days, 2:43:50",
    "numChanges": 1, "timestamp": 1592189091826}, {"namespace": "dual-evpn", "hostname":
    "exit02", "vrf": "evpn-vrf", "peer": "swp5.3", "peerHostname": "edge01", "state":
    "Established", "asn": 65202, "peerAsn": 65530, "v4PfxRx": 14, "estdTime": "18428
    days, 2:43:48", "numChanges": 1, "timestamp": 1592189091826}, {"namespace": "dual-evpn",
    "hostname": "leaf01", "vrf": "default", "peer": "swp1", "peerHostname": "spine01",
    "state": "Established", "asn": 65101, "peerAsn": 65000, "v4PfxRx": 14, "estdTime":
    "18428 days, 2:43:47", "numChanges": 1, "timestamp": 1592189092031}, {"namespace":
    "dual-evpn", "hostname": "leaf01", "vrf": "default", "peer": "swp2", "peerHostname":
    "spine02", "state": "Established", "asn": 65101, "peerAsn": 65000, "v4PfxRx":
    14, "estdTime": "18428 days, 2:43:46", "numChanges": 1, "timestamp": 1592189092031}]'
- command: bgp top --what="uptime" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: bgp top uptime
  output: '[{"namespace": "dual-evpn", "hostname": "exit01", "vrf": "default", "peer":
    "swp5.2", "peerHostname": "edge01", "state": "Established", "asn": 65201, "peerAsn":
    65530, "v4PfxRx": 13, "estdTime": "18428 days, 2:43:51", "numChanges": 1, "timestamp":
    1592189091826}, {"namespace": "dual-evpn", "hostname": "exit01", "vrf": "evpn-vrf",
    "peer": "swp5.3", "peerHostname": "edge01", "state": "Established", "asn": 65201,
    "peerAsn": 65530, "v4PfxRx": 15, "estdTime": "18428 days, 2:43:50", "numChanges":
    1, "timestamp": 1592189091826}, {"namespace": "dual-evpn", "hostname": "exit01",
    "vrf": "internet-vrf", "peer": "swp5.4", "peerHostname": "edge01", "state": "Established",
    "asn": 65201, "peerAsn": 65530, "v4PfxRx": 16, "estdTime": "18428 days, 2:43:50",
    "numChanges": 1, "timestamp": 1592189091826}, {"namespace": "dual-evpn", "hostname":
    "edge01", "vrf": "default", "peer": "eth1.2", "peerHostname": "exit01", "state":
    "Established", "asn": 65530, "peerAsn": 65201, "v4PfxRx": 10, "estdTime": "18428
    days, 2:43:49", "numChanges": 1, "timestamp": 1592189091420}, {"namespace": "dual-evpn",
    "hostname": "spine01", "vrf": "default", "peer": "swp3", "peerHostname": "leaf03",
    "state": "Established", "asn": 65000, "peerAsn": 65103, "v4PfxRx": 2, "estdTime":
    "18428 days, 2:43:49", "numChanges": 1, "timestamp": 1592189091826}]'
- command: device top --what="uptime" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device top uptime
  output: '[{"namespace": "dual-evpn", "hostname": "server101", "model": "vm", "version":
    "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive",
    "address": "192.168.121.196", "uptime": 295305, "timestamp": 1592189085305}, {"namespace":
    "ospf-ibgp", "hostname": "server101", "model": "vm", "version": "16.04.6 LTS",
    "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address": "192.168.121.17",
    "uptime": 288495, "timestamp": 1592188693495}, {"namespace": "ospf-ibgp", "hostname":
    "server102", "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.63", "uptime": 288495, "timestamp":
    1592188693495}, {"namespace": "dual-evpn", "hostname": "server102", "model": "vm",
    "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.186", "uptime": 288155, "timestamp": 1592189086155},
    {"namespace": "ospf-ibgp", "hostname": "server104", "model": "vm", "version":
    "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive",
    "address": "192.168.121.238", "uptime": 279495, "timestamp": 1592188693495}]'
- command: device top --what="uptime" --reverse=True --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device top uptime
  output: '[{"namespace": "ospf-single", "hostname": "exit02", "model": "vm", "version":
    "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address":
    "192.168.121.159", "uptime": 63121, "timestamp": 1592189451121}, {"namespace":
    "ospf-single", "hostname": "spine01", "model": "vm", "version": "3.7.12", "vendor":
    "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.20",
    "uptime": 63121, "timestamp": 1592189451121}, {"namespace": "ospf-single", "hostname":
    "spine02", "model": "vm", "version": "3.7.12", "vendor": "Cumulus", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.214", "uptime": 63121, "timestamp":
    1592189451121}, {"namespace": "ospf-single", "hostname": "exit01", "model": "vm",
    "version": "3.7.12", "vendor": "Cumulus", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.21", "uptime": 64156, "timestamp": 1592189451156},
    {"namespace": "ospf-single", "hostname": "leaf01", "model": "vm", "version": "3.7.12",
    "vendor": "Cumulus", "architecture": "x86-64", "status": "alive", "address": "192.168.121.173",
    "uptime": 64156, "timestamp": 1592189451156}]'
- command: device top --what="uptime" --namespace=ospf-ibgp --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device top uptime
  output: '[{"namespace": "ospf-ibgp", "hostname": "server101", "model": "vm", "version":
    "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive",
    "address": "192.168.121.17", "uptime": 288495, "timestamp": 1592188693495}, {"namespace":
    "ospf-ibgp", "hostname": "server102", "model": "vm", "version": "16.04.6 LTS",
    "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address": "192.168.121.63",
    "uptime": 288495, "timestamp": 1592188693495}, {"namespace": "ospf-ibgp", "hostname":
    "server104", "model": "vm", "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture":
    "x86-64", "status": "alive", "address": "192.168.121.238", "uptime": 279495, "timestamp":
    1592188693495}, {"namespace": "ospf-ibgp", "hostname": "server103", "model": "vm",
    "version": "16.04.6 LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status":
    "alive", "address": "192.168.121.107", "uptime": 261496, "timestamp": 1592188693496},
    {"namespace": "ospf-ibgp", "hostname": "edge01", "model": "vm", "version": "16.04.6
    LTS", "vendor": "Ubuntu", "architecture": "x86-64", "status": "alive", "address":
    "192.168.121.158", "uptime": 76496, "timestamp": 1592188693496}]'
- command: device top --what="uptime" --namespace=ospf-ibgp --reverse=True --columns='hostname
    vendor version' --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: device top uptime
  output: '[{"hostname": "exit01", "vendor": "Cumulus", "version": "3.7.12"}, {"hostname":
    "exit02", "vendor": "Cumulus", "version": "3.7.12"}, {"hostname": "leaf04", "vendor":
    "Cumulus", "version": "3.7.12"}, {"hostname": "spine01", "vendor": "Cumulus",
    "version": "3.7.12"}, {"hostname": "spine02", "vendor": "Cumulus", "version":
    "3.7.12"}]'
- command: ospf top --what="flaps" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: ospf top
  output: '[{"namespace": "ospf-ibgp", "hostname": "exit01", "vrf": "default", "ifname":
    "swp1", "area": "0.0.0.0", "ifState": "up", "nbrCount": 1, "adjState": "full",
    "peerIP": "10.0.0.22", "lastChangeTime": 0.0, "numChanges": 5.0, "timestamp":
    1592188699715}, {"namespace": "ospf-ibgp", "hostname": "exit01", "vrf": "default",
    "ifname": "swp2", "area": "0.0.0.0", "ifState": "up", "nbrCount": 1, "adjState":
    "full", "peerIP": "10.0.0.21", "lastChangeTime": 0.0, "numChanges": 5.0, "timestamp":
    1592188699715}, {"namespace": "ospf-ibgp", "hostname": "exit02", "vrf": "default",
    "ifname": "swp1", "area": "0.0.0.0", "ifState": "up", "nbrCount": 1, "adjState":
    "full", "peerIP": "10.0.0.22", "lastChangeTime": 0.0, "numChanges": 5.0, "timestamp":
    1592188699720}, {"namespace": "ospf-ibgp", "hostname": "exit02", "vrf": "default",
    "ifname": "swp2", "area": "0.0.0.0", "ifState": "up", "nbrCount": 1, "adjState":
    "full", "peerIP": "10.0.0.21", "lastChangeTime": 0.0, "numChanges": 5.0, "timestamp":
    1592188699720}, {"namespace": "ospf-ibgp", "hostname": "leaf01", "vrf": "default",
    "ifname": "swp1", "area": "0.0.0.0", "ifState": "up", "nbrCount": 1, "adjState":
    "full", "peerIP": "10.0.0.22", "lastChangeTime": 0.0, "numChanges": 5.0, "timestamp":
    1592188699720}]'
- command: ospf top --what="flaps" --namespace="ospf-ibgp" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: ospf top
  output: '[{"namespace": "ospf-ibgp", "hostname": "exit01", "vrf": "default", "ifname":
    "swp1", "area": "0.0.0.0", "ifState": "up", "nbrCount": 1, "adjState": "full",
    "peerIP": "10.0.0.22", "lastChangeTime": 0.0, "numChanges": 5.0, "timestamp":
    1592188699715}, {"namespace": "ospf-ibgp", "hostname": "exit01", "vrf": "default",
    "ifname": "swp2", "area": "0.0.0.0", "ifState": "up", "nbrCount": 1, "adjState":
    "full", "peerIP": "10.0.0.21", "lastChangeTime": 0.0, "numChanges": 5.0, "timestamp":
    1592188699715}, {"namespace": "ospf-ibgp", "hostname": "exit02", "vrf": "default",
    "ifname": "swp1", "area": "0.0.0.0", "ifState": "up", "nbrCount": 1, "adjState":
    "full", "peerIP": "10.0.0.22", "lastChangeTime": 0.0, "numChanges": 5.0, "timestamp":
    1592188699720}, {"namespace": "ospf-ibgp", "hostname": "exit02", "vrf": "default",
    "ifname": "swp2", "area": "0.0.0.0", "ifState": "up", "nbrCount": 1, "adjState":
    "full", "peerIP": "10.0.0.21", "lastChangeTime": 0.0, "numChanges": 5.0, "timestamp":
    1592188699720}, {"namespace": "ospf-ibgp", "hostname": "leaf01", "vrf": "default",
    "ifname": "swp1", "area": "0.0.0.0", "ifState": "up", "nbrCount": 1, "adjState":
    "full", "peerIP": "10.0.0.22", "lastChangeTime": 0.0, "numChanges": 5.0, "timestamp":
    1592188699720}]'
- command: ospf top --what="flaps" --columns="hostname ifname adjState" --format=json
  data-directory: tests/data/multidc/parquet-out/
  marks: ospf top
  output: '[{"hostname": "exit01", "ifname": "swp1", "adjState": "full"}, {"hostname":
    "exit01", "ifname": "swp2", "adjState": "full"}, {"hostname": "exit02", "ifname":
    "swp1", "adjState": "full"}, {"hostname": "exit02", "ifname": "swp2", "adjState":
    "full"}, {"hostname": "leaf01", "ifname": "swp1", "adjState": "full"}]'
