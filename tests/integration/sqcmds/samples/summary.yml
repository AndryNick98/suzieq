description: Testing summarize verb
tests:
  - command: bgp summarize --format=json --columns='namespace hostname'
    data-directory: tests/data/multidc/parquet-out
    error:
      error: |
        [{"error":"ERROR: You cannot specify columns with summarize"}]
    marks: bgp summarize error

  - command: bgp summarize --format=json
    data-directory: tests/data/multidc/parquet-out
    output: |
      {"dual-evpn":{"hosts":9,"sessions":34,"asns":8,"afi-safi":["ipv4","evpn"],"upTimes":["0:00:07","21:20:10","21:16:06"],"vrfs":3,"medV4PfxRx":13,"medV6PfxRx":0,"medEvpnPfxRx":8,"medUpdatesRx":113.5,"medUpdatesTx":117.0,"downSessions":0},"ospf-ibgp":{"hosts":9,"sessions":34,"asns":3,"afi-safi":["ipv4","evpn"],"upTimes":["6:10:36","1 day, 15:27:58","1 day, 15:27:03"],"vrfs":3,"medV4PfxRx":1,"medV6PfxRx":0,"medEvpnPfxRx":8,"medUpdatesRx":16.0,"medUpdatesTx":11.5,"downSessions":0}}

    marks: bgp summarize

  - command: bgp summarize --format=json --namespace='dual-evpn'
    data-directory: tests/data/multidc/parquet-out
    output: |
      {"dual-evpn":{"afi-safi":["ipv4","evpn"],"asns":8,"downSessions":0,"hosts":9,"medEvpnPfxRx":8,"medUpdatesRx":113.5,"medUpdatesTx":117,"medV4PfxRx":13,"medV6PfxRx":0,"sessions":34,"upTimes":["0:00:07","21:20:10","21:16:06"],"vrfs":3}}
    marks: bgp summarize filter


