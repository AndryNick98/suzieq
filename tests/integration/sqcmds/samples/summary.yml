description: Testing summarize verb
tests:
  - command: bgp summarize --format=json --columns='namespace hostname'
    data-directory: tests/data/multidc/parquet-out
    error:
      error: |
        [{"error":"ERROR: You cannot specify columns with summarize"}]
    marks: bgp summarize error

  - command: bgp summarize --format=json
    data-directory: tests/data/multidc/parquet-out
    output: |
      [{"dual-evpn":9,"ospf-ibgp":9},{"dual-evpn":34,"ospf-ibgp":34},{"dual-evpn":8,"ospf-ibgp":{"65000":28,"65001":4,"25253":2}},{"dual-evpn":9,"ospf-ibgp":4},{"dual-evpn":{"default":28,"internet-vrf":4,"evpn-vrf":2},"ospf-ibgp":{"default":28,"internet-vrf":4,"evpn-vrf":2}},{"dual-evpn":["ipv4","evpn"],"ospf-ibgp":["ipv4","evpn"]},{"dual-evpn":["0:00:07","21:20:10","21:16:06"],"ospf-ibgp":["6:10:36","1 day, 15:27:58","1 day, 15:27:03"]},{"dual-evpn":[2,16,13],"ospf-ibgp":[0,13,1]},{"dual-evpn":[0,0,0],"ospf-ibgp":[0,0,0]},{"dual-evpn":[0,39,8],"ospf-ibgp":[0,38,8]},{"dual-evpn":[28,253,113.5],"ospf-ibgp":[7,126,16.0]},{"dual-evpn":[28,236,117.0],"ospf-ibgp":[5,126,11.5]},{"dual-evpn":0,"ospf-ibgp":0}]
    marks: bgp summarize

  - command: bgp summarize --format=json --namespace='dual-evpn'
    data-directory: tests/data/multidc/parquet-out
    output: |
      [{"dual-evpn":9},{"dual-evpn":34},{"dual-evpn":8},{"dual-evpn":9},{"dual-evpn":{"default":28,"internet-vrf":4,"evpn-vrf":2}},{"dual-evpn":["ipv4","evpn"]},{"dual-evpn":["0:00:07","21:20:10","21:16:06"]},{"dual-evpn":[2.0,16.0,13.0]},{"dual-evpn":[0.0,0.0,0.0]},{"dual-evpn":[0.0,39.0,8.0]},{"dual-evpn":[28.0,253.0,113.5]},{"dual-evpn":[28.0,236.0,117.0]},{"dual-evpn":0}]
    marks: bgp summarize filter

  - command: ospf summarize --format=json
    data-directory: tests/data/multidc/parquet-out
    output: |
      [{"ospf-ibgp":7,"ospf-single":8},{"ospf-ibgp":18,"ospf-single":24},{"ospf-ibgp":{"0.0.0.0":18},"ospf-single":{"0.0.0.0":24}},{"ospf-ibgp":{"default":18},"ospf-single":{"default":24}},{"ospf-ibgp":{"full":18},"ospf-single":{"full":24}},{"ospf-ibgp":{"1":18},"ospf-single":{"1":24}},{"ospf-ibgp":8,"ospf-single":8},{"ospf-ibgp":["0 days 00:26:24.562662","0 days 00:26:24.562695","0 days 00:26:24.562695"],"ospf-single":["0 days 00:26:24.445972","0 days 00:26:24.445981","0 days 00:26:24.445975"]},{"ospf-ibgp":[5,5,5],"ospf-single":[4,5,5]},{"ospf-ibgp":[0,0,0],"ospf-single":[0,0,0]}]
    marks: ospf summarize

  - command: ospf summarize --format=json --type=interface
    data-directory: tests/data/multidc/parquet-out
    output: |
      [{"ospf-ibgp":7,"ospf-single":8},{"ospf-ibgp":18,"ospf-single":24},{"ospf-ibgp":{"0.0.0.0":18},"ospf-single":{"0.0.0.0":24}},{"ospf-ibgp":{"default":18},"ospf-single":{"default":24}},{"ospf-ibgp":{"full":18},"ospf-single":{"full":24}},{"ospf-ibgp":{"1":18},"ospf-single":{"1":24}},{"ospf-ibgp":8,"ospf-single":8},{"ospf-ibgp":["0 days 00:26:24.562662","0 days 00:26:24.562695","0 days 00:26:24.562695"],"ospf-single":["0 days 00:26:24.445972","0 days 00:26:24.445981","0 days 00:26:24.445975"]},{"ospf-ibgp":[5,5,5],"ospf-single":[4,5,5]},{"ospf-ibgp":[0,0,0],"ospf-single":[0,0,0]}]
    marks: ospf summarize

  - command: route summarize --format=json
    data-directory: tests/data/multidc/parquet-out
    output: |
      [{"dual-evpn":14,"ospf-ibgp":13,"ospf-single":11},{"dual-evpn":4,"ospf-ibgp":4,"ospf-single":2},{"dual-evpn":293,"ospf-ibgp":195,"ospf-single":100},{"dual-evpn":31,"ospf-ibgp":31,"ospf-single":16},{"dual-evpn":[4,53,19.5],"ospf-ibgp":[0,42,16.0],"ospf-single":[0,13,5.0]},{"dual-evpn":[16,175,51],"ospf-ibgp":[14,131,25],"ospf-single":[0,88,6]},{"dual-evpn":189,"ospf-ibgp":122,"ospf-single":42},{"dual-evpn":20,"ospf-ibgp":16,"ospf-single":0},{"dual-evpn":4,"ospf-ibgp":5,"ospf-single":{"ospf":64,"":19,"kernel":17}},{"dual-evpn":true,"ospf-ibgp":true,"ospf-single":true}]
    marks: routes summarize

  - command: interface summarize --format=json
    data-directory: tests/data/multidc/parquet-out
    output: |
      [{"dual-evpn":14,"ospf-ibgp":13,"ospf-single":14},{"dual-evpn":178,"ospf-ibgp":155,"ospf-single":96},{"dual-evpn":[4,23,9.5],"ospf-ibgp":[0,23,9.0],"ospf-single":[3,10,9.0]},{"dual-evpn":7,"ospf-ibgp":6,"ospf-single":4},{"dual-evpn":true,"ospf-ibgp":true,"ospf-single":false},{"dual-evpn":4,"ospf-ibgp":4,"ospf-single":{"1500":74,"65536":22}},{"dual-evpn":9,"ospf-ibgp":9,"ospf-single":5},{"dual-evpn":59,"ospf-ibgp":55,"ospf-single":30},{"dual-evpn":80,"ospf-ibgp":73,"ospf-single":45},{"dual-evpn":5,"ospf-ibgp":4,"ospf-single":0},{"dual-evpn":9,"ospf-ibgp":9,"ospf-single":17},{"dual-evpn":{"up":169,"unknown":5,"down":4},"ospf-ibgp":{"up":146,"unknown":5,"down":4},"ospf-single":{"up":79,"down":12,"unknown":5}},{"dual-evpn":[0,0,0],"ospf-ibgp":[0,0,0],"ospf-single":[0,0,0]}]
    marks: interface summarize

  - command: lldp summarize --format=json
    data-directory: tests/data/multidc/parquet-out
    output: |
      [{"dual-evpn":10,"ospf-ibgp":9,"ospf-single":5},{"dual-evpn":40,"ospf-ibgp":36,"ospf-single":16},{"dual-evpn":2,"ospf-ibgp":2,"ospf-single":1},{"dual-evpn":10,"ospf-ibgp":10,"ospf-single":8},{"dual-evpn":11,"ospf-ibgp":11,"ospf-single":8},{"dual-evpn":2,"ospf-ibgp":2,"ospf-single":0}]
    marks: lldp summarize

  - command: evpnVni summarize --format=json
    data-directory: tests/data/multidc/parquet-out
    output: |
      [{"dual-evpn":14,"ospf-ibgp":14},{"dual-evpn":{"104001":6,"24":4,"13":4},"ospf-ibgp":{"104001":6,"24":4,"13":4}},{"dual-evpn":{"L2":8,"L3":6},"ospf-ibgp":{"L2":8,"L3":6}},{"dual-evpn":{"evpn-vrf":14},"ospf-ibgp":{"evpn-vrf":14}},{"dual-evpn":[1,4,4],"ospf-ibgp":[1,4,4]},{"dual-evpn":[2,6,6],"ospf-ibgp":[2,6,6]},{"dual-evpn":{"10.0.0.112":4,"10.0.0.134":4},"ospf-ibgp":{"10.0.0.112":4,"10.0.0.134":4}}]
    marks: evpnVni summarize

  - command: mlag summarize --format=json
    data-directory: tests/data/multidc/parquet-out
    output: |
      [{"dual-evpn":4,"ospf-ibgp":4},{"dual-evpn":{"-":4},"ospf-ibgp":{"-":4}},{"dual-evpn":{"10.0.0.134":2,"10.0.0.112":2},"ospf-ibgp":{"10.0.0.134":2,"10.0.0.112":2}},{"dual-evpn":{"secondary":2,"primary":2},"ospf-ibgp":{"secondary":2,"primary":2}},{"dual-evpn":{"false":4},"ospf-ibgp":{"false":4}},{"dual-evpn":{"0":4},"ospf-ibgp":{"0":4}},{"dual-evpn":{"secondary":2,"primary":2},"ospf-ibgp":{"secondary":2,"primary":2}},{"dual-evpn":{"5":4},"ospf-ibgp":{"5":4}},{"dual-evpn":{"active":4},"ospf-ibgp":{"active":4}},{"dual-evpn":4,"ospf-ibgp":4},{"dual-evpn":{"0":4},"ospf-ibgp":{"0":4}},{"dual-evpn":{"peerlink.4094":4},"ospf-ibgp":{"peerlink.4094":4}},{"dual-evpn":{"-":4},"ospf-ibgp":{"-":4}},{"dual-evpn":{"44:39:39:ff:40:94":2,"44:39:39:ff:40:95":2},"ospf-ibgp":{"44:39:39:ff:40:94":2,"44:39:39:ff:40:95":2}},{"dual-evpn":4,"ospf-ibgp":4},{"dual-evpn":{"169.254.1.1":2,"169.254.1.2":2},"ospf-ibgp":{"169.254.1.1":2,"169.254.1.2":2}},{"dual-evpn":{"NA":4},"ospf-ibgp":{"NA":4}},{"dual-evpn":{"NA":4},"ospf-ibgp":{"NA":4}},{"dual-evpn":{"-":4},"ospf-ibgp":{"-":4}}]
    marks: evpnVni summarize