description: Testing summarize verb
tests:
  - command: bgp summarize --format=json --columns='namespace hostname'
    data-directory: tests/data/multidc/parquet-out
    error:
      error: |
        [{"error":"ERROR: You cannot specify columns with summarize"}]
    marks: bgp summarize error

  - command: bgp summarize --format=json
    data-directory: tests/data/multidc/parquet-out
    output: |
      {"dual-evpn":{"hosts":9,"sessions":34,"asn":8,"vrf":3,"afi-safi":["ipv4","evpn"],"downSessions":0,"upTimes":["0:00:07","21:20:10","21:16:06"],"V4PfxRx":[2,16,13],"V6PfxRx":[0,0,0],"EvpnPfxRx":[0,39,8],"UpdatesRx":[28,253,113.5],"UpdatesTx":[28,236,117.0]},"ospf-ibgp":{"hosts":9,"sessions":34,"asn":3,"vrf":3,"afi-safi":["ipv4","evpn"],"downSessions":0,"upTimes":["6:10:36","1 day, 15:27:58","1 day, 15:27:03"],"V4PfxRx":[0,13,1],"V6PfxRx":[0,0,0],"EvpnPfxRx":[0,38,8],"UpdatesRx":[7,126,16.0],"UpdatesTx":[5,126,11.5]}}
    marks: bgp summarize

  - command: bgp summarize --format=json --namespace='dual-evpn'
    data-directory: tests/data/multidc/parquet-out
    output: |
      {"dual-evpn":{"hosts":9,"sessions":34,"asn":8,"vrf":3,"afi-safi":["ipv4","evpn"],"downSessions":0,"upTimes":["0:00:07","21:20:10","21:16:06"],"V4PfxRx":[2,16,13],"V6PfxRx":[0,0,0],"EvpnPfxRx":[0,39,8],"UpdatesRx":[28,253,113.5],"UpdatesTx":[28,236,117]}}
    marks: bgp summarize filter


