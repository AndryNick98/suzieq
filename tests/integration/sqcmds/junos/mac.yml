description: 'Testing verbs for mac: show summarize unique'
tests:
- command: mac show --format=json
  data-directory: tests/data/junos/parquet-out/
  marks: mac show
  output: '[{"namespace": "junos", "hostname": "srv11", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875888996},
    {"namespace": "junos", "hostname": "srv11", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875888996},
    {"namespace": "junos", "hostname": "srv11", "vlan": 0, "macaddr": "33:33:ff:55:12:9d",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875888996},
    {"namespace": "junos", "hostname": "srv11", "vlan": 0, "macaddr": "33:33:ff:93:9a:ec",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875888996},
    {"namespace": "junos", "hostname": "srv12", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875888996},
    {"namespace": "junos", "hostname": "srv12", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875888996},
    {"namespace": "junos", "hostname": "srv12", "vlan": 0, "macaddr": "33:33:ff:55:12:9d",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875888996},
    {"namespace": "junos", "hostname": "srv12", "vlan": 0, "macaddr": "33:33:ff:91:43:ab",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875888996},
    {"namespace": "junos", "hostname": "srv21", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875888872},
    {"namespace": "junos", "hostname": "srv21", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875888872},
    {"namespace": "junos", "hostname": "srv21", "vlan": 0, "macaddr": "33:33:ff:55:12:9d",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875888872},
    {"namespace": "junos", "hostname": "srv21", "vlan": 0, "macaddr": "33:33:ff:31:eb:74",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875888872},
    {"namespace": "junos", "hostname": "srv22", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875889224},
    {"namespace": "junos", "hostname": "srv22", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875889224},
    {"namespace": "junos", "hostname": "srv22", "vlan": 0, "macaddr": "33:33:ff:55:12:9d",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875889224},
    {"namespace": "junos", "hostname": "srv22", "vlan": 0, "macaddr": "33:33:ff:4b:13:6b",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1591875889224},
    {"namespace": "junos", "hostname": "vqfx1", "vlan": 200, "macaddr": "02:05:86:71:88:00",
    "oif": "vtep.32769", "remoteVtepIp": "9.9.9.2", "flags": "remote", "timestamp":
    1591875889707}, {"namespace": "junos", "hostname": "vqfx2", "vlan": 200, "macaddr":
    "02:05:86:71:ed:00", "oif": "vtep.32769", "remoteVtepIp": "9.9.9.1", "flags":
    "remote", "timestamp": 1591875889852}]'
- command: mac show --columns=hostname --format=json
  data-directory: tests/data/junos/parquet-out/
  marks: mac show
  output: '[{"hostname": "srv11"}, {"hostname": "srv11"}, {"hostname": "srv11"}, {"hostname":
    "srv11"}, {"hostname": "srv12"}, {"hostname": "srv12"}, {"hostname": "srv12"},
    {"hostname": "srv12"}, {"hostname": "srv21"}, {"hostname": "srv21"}, {"hostname":
    "srv21"}, {"hostname": "srv21"}, {"hostname": "srv22"}, {"hostname": "srv22"},
    {"hostname": "srv22"}, {"hostname": "srv22"}, {"hostname": "vqfx1"}, {"hostname":
    "vqfx2"}]'
- command: mac summarize --format=json
  data-directory: tests/data/junos/parquet-out/
  marks: mac summarize
  output: '{"junos": {"deviceCnt": 6, "totalMacsinNSCnt": 18, "uniqueMacCnt": 9, "uniqueVlanperHostStat":
    [0, 1, 0.0]}}'
- command: mac unique --columns=hostname --format=json
  data-directory: tests/data/junos/parquet-out/
  marks: mac unique
  output: '[{"hostname": "vqfx2", "count": 1}, {"hostname": "vqfx1", "count": 1},
    {"hostname": "srv22", "count": 4}, {"hostname": "srv21", "count": 4}, {"hostname":
    "srv12", "count": 4}, {"hostname": "srv11", "count": 4}]'
