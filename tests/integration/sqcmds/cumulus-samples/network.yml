description: Testing network table for Cumulus
tests:
- command: network show --format=json
  data-directory: tests/data/multidc/parquet-out
  marks: network show all  cumulus
  output: '[{"namespace": "dual-evpn", "deviceCnt": 14, "serviceCnt": 17, "errSvcCnt":
    0, "hasOspf": false, "hasBgp": true, "hasVxlan": true, "hasMlag": true, "lastUpdate":
    1634522169638}, {"namespace": "ospf-ibgp", "deviceCnt": 14, "serviceCnt": 18,
    "errSvcCnt": 0, "hasOspf": true, "hasBgp": true, "hasVxlan": true, "hasMlag":
    true, "lastUpdate": 1634522089050}, {"namespace": "ospf-single", "deviceCnt":
    14, "serviceCnt": 16, "errSvcCnt": 0, "hasOspf": true, "hasBgp": false, "hasVxlan":
    false, "hasMlag": false, "lastUpdate": 1634522254949}]'
- command: network show --format=json --os=cumulus
  data-directory: tests/data/multidc/parquet-out
  marks: network show all  cumulus
  output: '[{"namespace": "dual-evpn", "deviceCnt": 14, "serviceCnt": 17, "errSvcCnt":
    0, "hasOspf": false, "hasBgp": true, "hasVxlan": true, "hasMlag": true, "lastUpdate":
    1634522169638}, {"namespace": "ospf-ibgp", "deviceCnt": 14, "serviceCnt": 18,
    "errSvcCnt": 0, "hasOspf": true, "hasBgp": true, "hasVxlan": true, "hasMlag":
    true, "lastUpdate": 1634522089050}, {"namespace": "ospf-single", "deviceCnt":
    14, "serviceCnt": 16, "errSvcCnt": 0, "hasOspf": true, "hasBgp": false, "hasVxlan":
    false, "hasMlag": false, "lastUpdate": 1634522254949}]'
- command: network find --address="172.16.1.101" --format=json
  data-directory: tests/data/multidc/parquet-out
  marks: network find all  cumulus
  output: '[{"namespace": "ospf-single", "hostname": "leaf01", "vrf": "default", "ipAddress":
    "172.16.1.101", "vlan": "10", "macaddr": "00:03:00:11:11:01", "ifname": "swp5",
    "bondMembers": "", "timestamp": 1616352402479}, {"namespace": "dual-evpn", "hostname":
    "leaf01", "vrf": "default", "ipAddress": "172.16.1.101", "vlan": "13", "macaddr":
    "52:54:00:a0:c3:0b", "ifname": "bond01", "bondMembers": "swp5", "timestamp": 1616644821712},
    {"namespace": "dual-evpn", "hostname": "leaf02", "vrf": "default", "ipAddress":
    "172.16.1.101", "vlan": "13", "macaddr": "52:54:00:a0:c3:0b", "ifname": "bond01",
    "bondMembers": "swp5", "timestamp": 1616644821714}, {"namespace": "ospf-ibgp",
    "hostname": "leaf01", "vrf": "evpn-vrf", "ipAddress": "172.16.1.101", "vlan":
    "13", "macaddr": "52:54:00:c5:1d:06", "ifname": "bond01", "bondMembers": "swp5",
    "timestamp": 1616681581180}, {"namespace": "ospf-ibgp", "hostname": "leaf02",
    "vrf": "evpn-vrf", "ipAddress": "172.16.1.101", "vlan": "13", "macaddr": "52:54:00:c5:1d:06",
    "ifname": "bond01", "bondMembers": "swp5", "timestamp": 1616681581182}]'
- command: network find --address="52:54:00:c5:1d:06" --namespace=ospf-ibgp --format=json
  data-directory: tests/data/multidc/parquet-out
  marks: network find all  cumulus
  output: '[{"namespace": "ospf-ibgp", "hostname": "leaf01", "vrf": "evpn-vrf", "ipAddress":
    "172.16.1.101", "vlan": "13", "macaddr": "52:54:00:c5:1d:06", "ifname": "bond01",
    "bondMembers": "swp5", "timestamp": 1616681581180}, {"namespace": "ospf-ibgp",
    "hostname": "leaf02", "vrf": "evpn-vrf", "ipAddress": "172.16.1.101", "vlan":
    "13", "macaddr": "52:54:00:c5:1d:06", "ifname": "bond01", "bondMembers": "swp5",
    "timestamp": 1616681581182}]'
- command: network find --address="72:f0:17:6d:80:3f" --namespace=ospf-ibgp --format=json
  data-directory: tests/data/multidc/parquet-out
  marks: network find all  cumulus
  output: '[]'
- command: network find --address="5254.00c5.1d06" --format=json
  data-directory: tests/data/multidc/parquet-out
  marks: network find all  cumulus
  output: '[{"namespace": "ospf-ibgp", "hostname": "leaf01", "vrf": "evpn-vrf", "ipAddress":
    "172.16.1.101", "vlan": "13", "macaddr": "52:54:00:c5:1d:06", "ifname": "bond01",
    "bondMembers": "swp5", "timestamp": 1616681581180}, {"namespace": "ospf-ibgp",
    "hostname": "leaf02", "vrf": "evpn-vrf", "ipAddress": "172.16.1.101", "vlan":
    "13", "macaddr": "52:54:00:c5:1d:06", "ifname": "bond01", "bondMembers": "swp5",
    "timestamp": 1616681581182}]'
- command: network summarize --namespace=cumulus --format=json
  data-directory: tests/data/multidc/parquet-out
  marks: network summarize all  cumulus
  output: '{}'
