description: 'Testing verbs for mac: show summarize unique'
tests:
- command: mac show --format=json
  data-directory: tests/data/nxos/parquet-out/
  marks: mac show
  output: '[{"namespace": "nxos", "hostname": "leaf1", "vlan": 10, "macaddr": "44:38:39:00:00:02",
    "oif": "Eth1/1", "remoteVtepIp": "", "flags": "dynamic", "timestamp": 1593120800585},
    {"namespace": "nxos", "hostname": "leaf1", "vlan": 30, "macaddr": "44:38:39:00:00:04",
    "oif": "Eth1/2", "remoteVtepIp": "", "flags": "dynamic", "timestamp": 1593120800585},
    {"namespace": "nxos", "hostname": "leaf1", "vlan": 30, "macaddr": "44:38:39:00:00:0c",
    "oif": "nve1", "remoteVtepIp": "10.0.0.12", "flags": "remote", "timestamp": 1593120800585},
    {"namespace": "nxos", "hostname": "leaf1", "vlan": 999, "macaddr": "44:00:00:02:1b:08",
    "oif": "nve1", "remoteVtepIp": "10.0.0.12", "flags": "remote", "timestamp": 1593120800585},
    {"namespace": "nxos", "hostname": "leaf1", "vlan": 0, "macaddr": "00:00:00:11:12:34",
    "oif": "sup-eth1(R)", "remoteVtepIp": "", "flags": "static", "timestamp": 1593120800585},
    {"namespace": "nxos", "hostname": "leaf1", "vlan": 0, "macaddr": "44:00:00:01:1b:08",
    "oif": "sup-eth1(R)", "remoteVtepIp": "", "flags": "static", "timestamp": 1593120800585},
    {"namespace": "nxos", "hostname": "leaf1", "vlan": 30, "macaddr": "44:00:00:01:1b:08",
    "oif": "sup-eth1(R)", "remoteVtepIp": "", "flags": "static", "timestamp": 1593120800585},
    {"namespace": "nxos", "hostname": "leaf1", "vlan": 999, "macaddr": "44:00:00:01:1b:08",
    "oif": "sup-eth1(R)", "remoteVtepIp": "", "flags": "static", "timestamp": 1593120800585},
    {"namespace": "nxos", "hostname": "leaf2", "vlan": 20, "macaddr": "44:38:39:00:00:0a",
    "oif": "Eth1/1", "remoteVtepIp": "", "flags": "dynamic", "timestamp": 1593120800057},
    {"namespace": "nxos", "hostname": "leaf2", "vlan": 30, "macaddr": "44:38:39:00:00:04",
    "oif": "nve1", "remoteVtepIp": "10.0.0.11", "flags": "remote", "timestamp": 1593120800057},
    {"namespace": "nxos", "hostname": "leaf2", "vlan": 30, "macaddr": "44:38:39:00:00:0c",
    "oif": "Eth1/2", "remoteVtepIp": "", "flags": "dynamic", "timestamp": 1593120800057},
    {"namespace": "nxos", "hostname": "leaf2", "vlan": 999, "macaddr": "44:00:00:01:1b:08",
    "oif": "nve1", "remoteVtepIp": "10.0.0.11", "flags": "remote", "timestamp": 1593120800057},
    {"namespace": "nxos", "hostname": "leaf2", "vlan": 0, "macaddr": "00:00:00:11:12:34",
    "oif": "sup-eth1(R)", "remoteVtepIp": "", "flags": "static", "timestamp": 1593120800057},
    {"namespace": "nxos", "hostname": "leaf2", "vlan": 0, "macaddr": "44:00:00:02:1b:08",
    "oif": "sup-eth1(R)", "remoteVtepIp": "", "flags": "static", "timestamp": 1593120800057},
    {"namespace": "nxos", "hostname": "leaf2", "vlan": 30, "macaddr": "44:00:00:02:1b:08",
    "oif": "sup-eth1(R)", "remoteVtepIp": "", "flags": "static", "timestamp": 1593120800057},
    {"namespace": "nxos", "hostname": "leaf2", "vlan": 999, "macaddr": "44:00:00:02:1b:08",
    "oif": "sup-eth1(R)", "remoteVtepIp": "", "flags": "static", "timestamp": 1593120800057},
    {"namespace": "nxos", "hostname": "server1", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server1", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server1", "vlan": 0, "macaddr": "33:33:ff:8e:4a:92",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server1", "vlan": 0, "macaddr": "01:80:c2:00:00:00",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server1", "vlan": 0, "macaddr": "01:80:c2:00:00:03",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server1", "vlan": 0, "macaddr": "01:80:c2:00:00:0e",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server1", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server1", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server1", "vlan": 0, "macaddr": "33:33:ff:00:00:02",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server1", "vlan": 0, "macaddr": "01:80:c2:00:00:00",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server1", "vlan": 0, "macaddr": "01:80:c2:00:00:03",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server1", "vlan": 0, "macaddr": "01:80:c2:00:00:0e",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server2", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797115},
    {"namespace": "nxos", "hostname": "server2", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797115},
    {"namespace": "nxos", "hostname": "server2", "vlan": 0, "macaddr": "33:33:ff:e0:89:aa",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797115},
    {"namespace": "nxos", "hostname": "server2", "vlan": 0, "macaddr": "01:80:c2:00:00:00",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797115},
    {"namespace": "nxos", "hostname": "server2", "vlan": 0, "macaddr": "01:80:c2:00:00:03",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797115},
    {"namespace": "nxos", "hostname": "server2", "vlan": 0, "macaddr": "01:80:c2:00:00:0e",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797115},
    {"namespace": "nxos", "hostname": "server2", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797115},
    {"namespace": "nxos", "hostname": "server2", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797115},
    {"namespace": "nxos", "hostname": "server2", "vlan": 0, "macaddr": "33:33:ff:00:00:04",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797115},
    {"namespace": "nxos", "hostname": "server2", "vlan": 0, "macaddr": "01:80:c2:00:00:00",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797115},
    {"namespace": "nxos", "hostname": "server2", "vlan": 0, "macaddr": "01:80:c2:00:00:03",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797115},
    {"namespace": "nxos", "hostname": "server2", "vlan": 0, "macaddr": "01:80:c2:00:00:0e",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797115},
    {"namespace": "nxos", "hostname": "server3", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797387},
    {"namespace": "nxos", "hostname": "server3", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797387},
    {"namespace": "nxos", "hostname": "server3", "vlan": 0, "macaddr": "33:33:ff:bf:fc:69",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797387},
    {"namespace": "nxos", "hostname": "server3", "vlan": 0, "macaddr": "01:80:c2:00:00:00",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797387},
    {"namespace": "nxos", "hostname": "server3", "vlan": 0, "macaddr": "01:80:c2:00:00:03",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797387},
    {"namespace": "nxos", "hostname": "server3", "vlan": 0, "macaddr": "01:80:c2:00:00:0e",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797387},
    {"namespace": "nxos", "hostname": "server3", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797387},
    {"namespace": "nxos", "hostname": "server3", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797387},
    {"namespace": "nxos", "hostname": "server3", "vlan": 0, "macaddr": "33:33:ff:00:00:0a",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797387},
    {"namespace": "nxos", "hostname": "server3", "vlan": 0, "macaddr": "01:80:c2:00:00:00",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797387},
    {"namespace": "nxos", "hostname": "server3", "vlan": 0, "macaddr": "01:80:c2:00:00:03",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797387},
    {"namespace": "nxos", "hostname": "server3", "vlan": 0, "macaddr": "01:80:c2:00:00:0e",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797387},
    {"namespace": "nxos", "hostname": "server4", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server4", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server4", "vlan": 0, "macaddr": "33:33:ff:50:55:99",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server4", "vlan": 0, "macaddr": "01:80:c2:00:00:00",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server4", "vlan": 0, "macaddr": "01:80:c2:00:00:03",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server4", "vlan": 0, "macaddr": "01:80:c2:00:00:0e",
    "oif": "eth0", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server4", "vlan": 0, "macaddr": "01:00:5e:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server4", "vlan": 0, "macaddr": "33:33:00:00:00:01",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server4", "vlan": 0, "macaddr": "33:33:ff:00:00:0c",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server4", "vlan": 0, "macaddr": "01:80:c2:00:00:00",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server4", "vlan": 0, "macaddr": "01:80:c2:00:00:03",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "server4", "vlan": 0, "macaddr": "01:80:c2:00:00:0e",
    "oif": "eth1", "remoteVtepIp": "", "flags": "permanent", "timestamp": 1593120797104},
    {"namespace": "nxos", "hostname": "spine1", "vlan": 0, "macaddr": "44:00:00:03:1b:08",
    "oif": "sup-eth1(R)", "remoteVtepIp": "", "flags": "static", "timestamp": 1593120799041},
    {"namespace": "nxos", "hostname": "spine2", "vlan": 0, "macaddr": "44:00:00:04:1b:08",
    "oif": "sup-eth1(R)", "remoteVtepIp": "", "flags": "static", "timestamp": 1593120799446}]'
- command: mac show --columns=hostname --format=json
  data-directory: tests/data/nxos/parquet-out/
  marks: mac show
  output: '[{"hostname": "leaf1"}, {"hostname": "leaf1"}, {"hostname": "leaf1"}, {"hostname":
    "leaf1"}, {"hostname": "leaf1"}, {"hostname": "leaf1"}, {"hostname": "leaf1"},
    {"hostname": "leaf1"}, {"hostname": "leaf2"}, {"hostname": "leaf2"}, {"hostname":
    "leaf2"}, {"hostname": "leaf2"}, {"hostname": "leaf2"}, {"hostname": "leaf2"},
    {"hostname": "leaf2"}, {"hostname": "leaf2"}, {"hostname": "server1"}, {"hostname":
    "server1"}, {"hostname": "server1"}, {"hostname": "server1"}, {"hostname": "server1"},
    {"hostname": "server1"}, {"hostname": "server1"}, {"hostname": "server1"}, {"hostname":
    "server1"}, {"hostname": "server1"}, {"hostname": "server1"}, {"hostname": "server1"},
    {"hostname": "server2"}, {"hostname": "server2"}, {"hostname": "server2"}, {"hostname":
    "server2"}, {"hostname": "server2"}, {"hostname": "server2"}, {"hostname": "server2"},
    {"hostname": "server2"}, {"hostname": "server2"}, {"hostname": "server2"}, {"hostname":
    "server2"}, {"hostname": "server2"}, {"hostname": "server3"}, {"hostname": "server3"},
    {"hostname": "server3"}, {"hostname": "server3"}, {"hostname": "server3"}, {"hostname":
    "server3"}, {"hostname": "server3"}, {"hostname": "server3"}, {"hostname": "server3"},
    {"hostname": "server3"}, {"hostname": "server3"}, {"hostname": "server3"}, {"hostname":
    "server4"}, {"hostname": "server4"}, {"hostname": "server4"}, {"hostname": "server4"},
    {"hostname": "server4"}, {"hostname": "server4"}, {"hostname": "server4"}, {"hostname":
    "server4"}, {"hostname": "server4"}, {"hostname": "server4"}, {"hostname": "server4"},
    {"hostname": "server4"}, {"hostname": "spine1"}, {"hostname": "spine2"}]'
- command: mac summarize --format=json
  data-directory: tests/data/nxos/parquet-out/
  marks: mac summarize
  output: '{"nxos": {"deviceCnt": 8, "totalMacsinNSCnt": 66, "uniqueMacCnt": 22, "uniqueVlanperHostStat":
    [0, 3, 0.0]}}'
- command: mac unique --columns=hostname --format=json
  data-directory: tests/data/nxos/parquet-out/
  marks: mac unique
  output: '[{"hostname": "spine2", "count": 1}, {"hostname": "spine1", "count": 1},
    {"hostname": "leaf2", "count": 8}, {"hostname": "leaf1", "count": 8}, {"hostname":
    "server4", "count": 12}, {"hostname": "server3", "count": 12}, {"hostname": "server2",
    "count": 12}, {"hostname": "server1", "count": 12}]'
